
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Requirement Evolution Analysis - peps/pep-0771.rst</title>
    <style>
        body { font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; margin: 20px; background-color: #f4f4f9; color: #333; }
        h1 { color: #2c3e50; }
        .container { max-width: 95%; margin: 0 auto; background: white; padding: 20px; border-radius: 8px; box-shadow: 0 2px 5px rgba(0,0,0,0.1); }
        table { width: 100%; border-collapse: collapse; margin-top: 20px; }
        th, td { border: 1px solid #ddd; padding: 12px; text-align: left; vertical-align: top; }
        th { background-color: #3498db; color: white; }
        tr:nth-child(even) { background-color: #f9f9f9; }
        .diff-text { font-family: 'Consolas', 'Courier New', monospace; white-space: pre-wrap; background-color: #f8f9fa; padding: 5px; border-radius: 4px; border: 1px solid #e1e4e8; overflow-x: auto; }
        .reason-type { font-weight: bold; color: #2980b9; position: relative; display: inline-block; cursor: help; border-bottom: 1px dotted #2980b9; }
        .old-version { color: #c0392b; text-decoration: line-through; }
        .new-version { color: #27ae60; }
        .meta { margin-bottom: 20px; color: #7f8c8d; }
        
        /* Tooltip container */
        .tooltip .tooltiptext {
            visibility: hidden;
            width: 300px;
            background-color: #555;
            color: #fff;
            text-align: left;
            border-radius: 6px;
            padding: 10px;
            position: absolute;
            z-index: 1;
            bottom: 125%; /* Position the tooltip above the text */
            left: 50%;
            margin-left: -150px;
            opacity: 0;
            transition: opacity 0.3s;
            font-size: 0.9em;
            font-weight: normal;
            box-shadow: 0 2px 5px rgba(0,0,0,0.2);
            line-height: 1.4;
        }

        .tooltip .tooltiptext::after {
            content: "";
            position: absolute;
            top: 100%;
            left: 50%;
            margin-left: -5px;
            border-width: 5px;
            border-style: solid;
            border-color: #555 transparent transparent transparent;
        }

        .tooltip:hover .tooltiptext {
            visibility: visible;
            opacity: 1;
        }

        /* Git Style Diff */
        .diff-line { display: block; min-height: 1.2em; }
        .diff-added { background-color: #e6ffed; color: #22863a; }
        .diff-removed { background-color: #ffeef0; color: #b31d28; }
        .diff-header { color: #6f7781; font-weight: bold; }
        
        /* Feedback Form */
        .feedback-cell { display: flex; flex-direction: column; gap: 10px; }
        .feedback-area { width: 100%; padding: 8px; border: 1px solid #ccc; border-radius: 4px; font-family: inherit; }
        .reason-select { width: 100%; padding: 8px; border: 1px solid #ccc; border-radius: 4px; background-color: white; }
        .submit-btn { display: block; width: 100%; padding: 15px; background-color: #2ecc71; color: white; border: none; border-radius: 4px; font-size: 1.2em; cursor: pointer; margin-top: 20px; transition: all 0.3s ease; }
        .submit-btn:hover { transform: translateY(-2px); box-shadow: 0 4px 15px rgba(0,0,0,0.2); opacity: 0.9; }
        label { font-weight: bold; font-size: 0.9em; color: #555; }
    </style>
</head>
<body>
    <div class="container">
        <h1>Requirement Evolution: peps/pep-0771.rst</h1>
        <div class="meta">
            <p><strong>Number of Versions:</strong> 4</p>
        </div>
        
        <form id="feedbackForm">
            <table>
                <colgroup>
                    <col style="width: 50px;">
                    <col style="width: 60%;">
                    <col style="width: 35%;">
                    
                </colgroup>
                <thead>
                    <tr>
                        <th>ID</th>
                        <th>Change Details</th>
                        <th>AI Analysis</th>
                        
                    </tr>
                </thead>
                <tbody>
                    
                    <tr>
                        <td>1</td>
                        <td>
                            <div><strong>From:</strong> 1 &rarr; <strong>To:</strong> 2</div>
                            
                            <div style="font-size: 0.8em; color: #666; margin-bottom: 5px;">
                                0ff88ad (2025-01-22 17:30:58 +0000) &rarr; 0899c62 (2025-02-06 17:02:06 +0000)
                            </div>
                            
                            <div class="diff-text"><span class="diff-line">Title: Default Extras for Python Software Packages</span>
<span class="diff-line"> Author: Thomas Robitaille <thomas.robitaille@gmail.com>, Jonathan Dekhtiar <jonathan@dekhtiar.com></span>
<span class="diff-line"> Sponsor: Pradyun Gedam <pradyunsg@gmail.com></span>
<span class="diff-line diff-added">+Discussions-To: https://discuss.python.org/t/79706/</span>
<span class="diff-line"> Status: Draft</span>
<span class="diff-line"> Type: Standards Track</span>
<span class="diff-line"> Topic: Packaging</span>
<span class="diff-line"> Created: 13-Jan-2025</span>
<span class="diff-line diff-added">+Post-History:</span>
<span class="diff-line diff-added">+  `15-Jan-2025 <https://discuss.python.org/t/77892/>`__,</span>
<span class="diff-line diff-added">+  `06-Feb-2025 <https://discuss.python.org/t/79706/>`__,</span>
<span class="diff-line"> </span>
<span class="diff-line"> Abstract</span>
<span class="diff-line"> ========</span></div>
                        </td>
                        <td>
                            <div class="reason-type tooltip">Other
                                <span class="tooltiptext">The change does not fit into any of the above categories (e.g. metadata removal, formatting changes, boilerplate).</span>
                            </div>
                            <p>The changes are editorial/metadata edits to the document header (added Discussions-To and Post-History lines) and do not modify the requirements themselves (no change to intent, constraints, or semantics). This is not a requirement-level change.</p>
                        </td>
                        
                    </tr>
                    
                    <tr>
                        <td>2</td>
                        <td>
                            <div><strong>From:</strong> 1 &rarr; <strong>To:</strong> 2</div>
                            
                            <div style="font-size: 0.8em; color: #666; margin-bottom: 5px;">
                                0ff88ad (2025-01-22 17:30:58 +0000) &rarr; 0899c62 (2025-02-06 17:02:06 +0000)
                            </div>
                            
                            <div class="diff-text"><span class="diff-line">of the ``[recommended]`` syntax, placing the burden on them to know this for a</span>
<span class="diff-line"> typical installation. Having a way to have recommended dependencies be installed</span>
<span class="diff-line"> by default while providing a way for users to request a more minimal installation</span>
<span class="diff-line diff-removed">-would satisfy this use case. The present PEP will describe a solution for this use case.</span>
<span class="diff-line diff-added">+would satisfy this use case, and this PEP describes a solution to this.</span>
<span class="diff-line diff-added">+</span>
<span class="diff-line diff-added">+Examples of packages that demonstrate this pattern by encouraging users to</span>
<span class="diff-line diff-added">+include extra dependencies by default include:</span>
<span class="diff-line diff-added">+</span>
<span class="diff-line diff-added">+* `astropy <https://www.astropy.org/>`_: ``astropy[recommended]``</span>
<span class="diff-line diff-added">+* `fastapi <https://fastapi.tiangolo.com/>`_: ``fastapi[standard]``</span>
<span class="diff-line diff-added">+* `tensorflow <https://www.tensorflow.org>`_: ``tensorflow[and-cuda]``</span>
<span class="diff-line"> </span>
<span class="diff-line"> Packages supporting multiple backends or frontends</span>
<span class="diff-line"> --------------------------------------------------</span></div>
                        </td>
                        <td>
                            <div class="reason-type tooltip">Demonstration
                                <span class="tooltiptext">An example or visualization was added to assist in understanding.</span>
                            </div>
                            <p>Added Examples of packages that demonstrate this pattern by encouraging users to include extra dependencies by default (astropy, fastapi, tensorflow) to illustrate the recommended dependencies default behavior.</p>
                        </td>
                        
                    </tr>
                    
                    <tr>
                        <td>3</td>
                        <td>
                            <div><strong>From:</strong> 1 &rarr; <strong>To:</strong> 2</div>
                            
                            <div style="font-size: 0.8em; color: #666; margin-bottom: 5px;">
                                0ff88ad (2025-01-22 17:30:58 +0000) &rarr; 0899c62 (2025-02-06 17:02:06 +0000)
                            </div>
                            
                            <div class="diff-text"><span class="diff-line">in order to be functional, but may be flexible on which backend or frontend this</span>
<span class="diff-line"> is. Concrete examples of such frontends or backends include:</span>
<span class="diff-line"> </span>
<span class="diff-line diff-removed">-* The Qt frontend library, which requires either PySide or PyQt to be installed</span>
<span class="diff-line diff-added">+* The Qt frontend library, which can be provided by `PyQt5 <https://pypi.org/project/PyQt5/>`_, `PyQt6</span>
<span class="diff-line diff-added">+  <https://pypi.org/project/PyQt6/>`_, `PySide2</span>
<span class="diff-line diff-added">+  <https://pypi.org/project/PySide2/>`_, or `PySide6</span>
<span class="diff-line diff-added">+  <https://pypi.org/project/PySide6/>`_</span>
<span class="diff-line"> * BLAS/LAPACK, which have different possible implementations (e.g. OpenBLAS, and MKL)</span>
<span class="diff-line"> * FFT libraries, which also have different implementations (e.g. ``scipy.fft`` and pyFFTW)</span></div>
                        </td>
                        <td>
                            <div class="reason-type tooltip">Clarification
                                <span class="tooltiptext">Rephrasing the same requirement to help understanding WITHOUT changing the meaning/intent.</span>
                            </div>
                            <p>This change is a Clarification: the underlying requirement remains the same (to introduce a Default-Extra mechanism to install default extras when none are specified). The New version mostly revises wording, adds references and examples, and renames the project metadata key from default-optional-dependencies to default-optional-dependency-keys for clarity. It does not introduce new functionality or alter the fundamental behavior; it clarifies usage and provides additional contextual materials.</p>
                        </td>
                        
                    </tr>
                    
                    <tr>
                        <td>4</td>
                        <td>
                            <div><strong>From:</strong> 1 &rarr; <strong>To:</strong> 2</div>
                            
                            <div style="font-size: 0.8em; color: #666; margin-bottom: 5px;">
                                0ff88ad (2025-01-22 17:30:58 +0000) &rarr; 0899c62 (2025-02-06 17:02:06 +0000)
                            </div>
                            
                            <div class="diff-text"><span class="diff-line">infrastructure to disallow conflicting or incompatible extras to be installed,</span>
<span class="diff-line"> and this PEP does not change that.</span>
<span class="diff-line"> </span>
<span class="diff-line diff-added">+Examples of packages that require at least one backend or frontend to work and</span>
<span class="diff-line diff-added">+recommend a default extra to install a backend or frontend include:</span>
<span class="diff-line diff-added">+</span>
<span class="diff-line diff-added">+* `kivy <https://kivy.org/>`_: ``kivy[base]``</span>
<span class="diff-line diff-added">+</span>
<span class="diff-line diff-added">+* `napari <https://napari.org>`_: ``napari[all]``</span>
<span class="diff-line diff-added">+</span>
<span class="diff-line diff-added">+* `glueviz <https://www.glueviz.org>`_: ``glueviz[qt]``</span>
<span class="diff-line diff-added">+</span>
<span class="diff-line diff-added">+In all three cases, installing the package without any extras results in a</span>
<span class="diff-line diff-added">+broken installation (and this is a commonly reported issue for some of these</span>
<span class="diff-line diff-added">+packages).</span>
<span class="diff-line diff-added">+</span>
<span class="diff-line"> Rationale</span>
<span class="diff-line"> =========</span>
<span class="diff-line"> </span>
<span class="diff-line"> A number of possible solutions have been extensively and vigorously discussed by</span>
<span class="diff-line"> the community for several years, including in `this DPO thread</span>
<span class="diff-line diff-removed">-<https://discuss.python.org/t/adding-a-default-extra-require-environment/4898/38>`__</span>
<span class="diff-line diff-removed">-as well as in numerous issues and pull requests. The solution that will be</span>
<span class="diff-line diff-added">+<https://discuss.python.org/t/adding-a-default-extra-require-environment/4898>`__</span>
<span class="diff-line diff-added">+as well as in numerous issues and pull requests. The solution that is</span>
<span class="diff-line"> presented below:</span>
<span class="diff-line"> </span>
<span class="diff-line diff-removed">-* does not break backward-compatibility of existing packaging infrastructure</span>
<span class="diff-line"> * is an opt-in solution which means that package maintainers can choose whether or not to use it</span>
<span class="diff-line diff-removed">-* is flexible enough to accommodate both of the major use cases described in `Motivation`_.</span>
<span class="diff-line diff-added">+* is flexible enough to accommodate both of the major use cases described in `Motivation`_</span>
<span class="diff-line diff-added">+* re-uses the syntax from :pep:`508`</span>
<span class="diff-line"> </span>
<span class="diff-line"> It is the only solution out of all those discussed that meets all three criteria.</span></div>
                        </td>
                        <td>
                            <div class="reason-type tooltip">Meaning
                                <span class="tooltiptext">The requirement meaning/intention is changed (says something different).</span>
                            </div>
                            <p>The most significant change is a semantic/structural update: the [project] metadata key for default extras is renamed from default-optional-dependencies to default-optional-dependency-keys, and the accompanying example TOML uses the new key. This changes the required metadata field and its usage. Additionally, the diff adds demonstrative content (examples of packages requiring a backend/frontend, e.g., kivy/napari/glueviz) and updates the rationale with a new bullet about re-using the syntax from :pep:`508` and a corrected thread link, but these are supplementary clarifications and examples rather than core intent changes.</p>
                        </td>
                        
                    </tr>
                    
                    <tr>
                        <td>5</td>
                        <td>
                            <div><strong>From:</strong> 1 &rarr; <strong>To:</strong> 2</div>
                            
                            <div style="font-size: 0.8em; color: #666; margin-bottom: 5px;">
                                0ff88ad (2025-01-22 17:30:58 +0000) &rarr; 0899c62 (2025-02-06 17:02:06 +0000)
                            </div>
                            
                            <div class="diff-text"><span class="diff-line">A new key will be added to the ``[project]`` table in project metadata as</span>
<span class="diff-line"> originally defined in :pep:`621` and now defined in the `PyPA specifications</span>
<span class="diff-line"> <https://packaging.python.org/en/latest/specifications/pyproject-toml/>`_. This key will be named</span>
<span class="diff-line diff-removed">-``default-optional-dependencies`` with the following description:</span>
<span class="diff-line diff-added">+``default-optional-dependency-keys`` with the following description:</span>
<span class="diff-line"> </span>
<span class="diff-line"> * `TOML <https://toml.io/>`_ type: Array of strings</span>
<span class="diff-line"> * Corresponding core metadata field: ``Default-Extra``</span>
<span class="diff-line"> </span>
<span class="diff-line diff-removed">-Each string in ``default-optional-dependencies`` must be the name of an extra</span>
<span class="diff-line diff-added">+Each string in ``default-optional-dependency-keys`` must be the name of an extra</span>
<span class="diff-line"> defined in `optional-dependencies</span>
<span class="diff-line"> <https://packaging.python.org/en/latest/specifications/pyproject-toml/#dependencies-optional-dependencies>`_,</span>
<span class="diff-line"> and each extra in this array will be converted to a matching ``Default-Extra``</span></div>
                        </td>
                        <td>
                            <div class="reason-type tooltip">Clarification
                                <span class="tooltiptext">Rephrasing the same requirement to help understanding WITHOUT changing the meaning/intent.</span>
                            </div>
                            <p>The change is a rename of the [project] metadata key from 'default-optional-dependencies' to 'default-optional-dependency-keys'. The underlying meaning remains the same (a list of extras that map to Default-Extra); this is a terminology normalization/clarification rather than a change in behavior, so the dominant change is clarifying the naming rather than introducing new requirements.</p>
                        </td>
                        
                    </tr>
                    
                    <tr>
                        <td>6</td>
                        <td>
                            <div><strong>From:</strong> 1 &rarr; <strong>To:</strong> 2</div>
                            
                            <div style="font-size: 0.8em; color: #666; margin-bottom: 5px;">
                                0ff88ad (2025-01-22 17:30:58 +0000) &rarr; 0899c62 (2025-02-06 17:02:06 +0000)
                            </div>
                            
                            <div class="diff-text"><span class="diff-line">.. code-block:: toml</span>
<span class="diff-line"> </span>
<span class="diff-line">     [project]</span>
<span class="diff-line diff-removed">-    default-optional-dependencies = [</span>
<span class="diff-line diff-added">+    default-optional-dependency-keys = [</span>
<span class="diff-line">         "recommended",</span>
<span class="diff-line">     ]</span></div>
                        </td>
                        <td>
                            <div class="reason-type tooltip">Clarification
                                <span class="tooltiptext">Rephrasing the same requirement to help understanding WITHOUT changing the meaning/intent.</span>
                            </div>
                            <p>Renamed the [project] key from default-optional-dependencies to default-optional-dependency-keys to reflect that the values are the names/keys of extras (not actual dependencies). The semantics remain the same (each string corresponds to an extra and maps to Default-Extra).</p>
                        </td>
                        
                    </tr>
                    
                    <tr>
                        <td>7</td>
                        <td>
                            <div><strong>From:</strong> 1 &rarr; <strong>To:</strong> 2</div>
                            
                            <div style="font-size: 0.8em; color: #666; margin-bottom: 5px;">
                                0ff88ad (2025-01-22 17:30:58 +0000) &rarr; 0899c62 (2025-02-06 17:02:06 +0000)
                            </div>
                            
                            <div class="diff-text"><span class="diff-line">.. code-block:: toml</span>
<span class="diff-line"> </span>
<span class="diff-line">     [project]</span>
<span class="diff-line diff-removed">-    default-optional-dependencies = [</span>
<span class="diff-line diff-added">+    default-optional-dependency-keys = [</span>
<span class="diff-line">         "backend1",</span>
<span class="diff-line">         "backend2",</span>
<span class="diff-line">         "backend3"</span></div>
                        </td>
                        <td>
                            <div class="reason-type tooltip">Clarification
                                <span class="tooltiptext">Rephrasing the same requirement to help understanding WITHOUT changing the meaning/intent.</span>
                            </div>
                            <p>Renamed the [project] metadata field from default-optional-dependencies to default-optional-dependency-keys to reflect that the value is a list of extra-names (keys) rather than dependencies. The new name clarifies the semantics and aligns terminology with the concept of extras defined in optional-dependencies, preserving behavior while improving clarity.</p>
                        </td>
                        
                    </tr>
                    
                    <tr>
                        <td>8</td>
                        <td>
                            <div><strong>From:</strong> 1 &rarr; <strong>To:</strong> 2</div>
                            
                            <div style="font-size: 0.8em; color: #666; margin-bottom: 5px;">
                                0ff88ad (2025-01-22 17:30:58 +0000) &rarr; 0899c62 (2025-02-06 17:02:06 +0000)
                            </div>
                            
                            <div class="diff-text"><span class="diff-line diff-removed">-------------------------</span>
<span class="diff-line"> </span>
<span class="diff-line"> If extras are explicitly given in a dependency specification, the default</span>
<span class="diff-line diff-removed">-extras are not installed. Otherwise, the default extras are used.</span>
<span class="diff-line diff-added">+extras are ignored. Otherwise, the default extras are installed.</span>
<span class="diff-line diff-added">+</span>
<span class="diff-line diff-added">+For example, if a package defines an ``extra1`` default extra as well as a</span>
<span class="diff-line diff-added">+non-default ``extra2`` extra, then if a user were to install the package with:</span>
<span class="diff-line diff-added">+</span>
<span class="diff-line diff-added">+.. code-block:: console</span>
<span class="diff-line"> </span>
<span class="diff-line diff-removed">-For example, if a package</span>
<span class="diff-line diff-removed">-defines an ``extra1`` default extra as well as a non-default ``extra2``</span>
<span class="diff-line diff-removed">-extra, then if a user were to install the package with::</span>
<span class="diff-line diff-added">+    $ pip install package</span>
<span class="diff-line"> </span>
<span class="diff-line diff-removed">-    pip install package</span>
<span class="diff-line diff-added">+the default ``extra1`` dependency would be included. If the user instead</span>
<span class="diff-line diff-added">+installs the package with:</span>
<span class="diff-line"> </span>
<span class="diff-line diff-removed">-the ``extra1`` dependency would be included. If the user instead uses::</span>
<span class="diff-line diff-added">+.. code-block:: console</span>
<span class="diff-line"> </span>
<span class="diff-line diff-removed">-    pip install package[extra2]</span>
<span class="diff-line diff-added">+    $ pip install package[extra2]</span>
<span class="diff-line"> </span>
<span class="diff-line diff-removed">-then the ``extra1`` extra would not be installed.</span>
<span class="diff-line diff-added">+then the ``extra2`` extra would be installed but the default ``extra1`` extra</span>
<span class="diff-line diff-added">+would be ignored.</span>
<span class="diff-line"> </span>
<span class="diff-line"> If the same package is specified multiple times in an installation command or</span>
<span class="diff-line"> dependency tree, the default extras must be installed if any of the instances of</span>
<span class="diff-line diff-removed">-the package are specified without extras. For instance::</span>
<span class="diff-line diff-added">+the package are specified without extras.  For instance, if one installs a</span>
<span class="diff-line diff-added">+package ``spam`` where ``package`` appears several times in the dependency</span>
<span class="diff-line diff-added">+tree::</span>
<span class="diff-line"> </span>
<span class="diff-line diff-removed">-    pip install package package[extra2]</span>
<span class="diff-line diff-added">+    spam</span>
<span class="diff-line diff-added">+    ├── tomato</span>
<span class="diff-line diff-added">+    │   ├── package[extra2]</span>
<span class="diff-line diff-added">+    └── egg</span>
<span class="diff-line diff-added">+        └── package</span>
<span class="diff-line"> </span>
<span class="diff-line diff-removed">-should install the default extras.</span>
<span class="diff-line diff-added">+then the default extra should be installed because ``package`` appears at least</span>
<span class="diff-line diff-added">+once with no extras specified.</span>
<span class="diff-line"> </span>
<span class="diff-line"> Note that ``package[]`` would continue to be equivalent to ``package`` and would</span>
<span class="diff-line"> not be provided as a way to install without default extras (see the `Rejected</span>
<span class="diff-line"> Ideas`_ section for the rationale).</span>
<span class="diff-line"> </span>
<span class="diff-line diff-added">+We also note that some tools such as `pip`_ currently ignore unrecognized</span>
<span class="diff-line diff-added">+extras, and emit a warning to the user to indicate that the extra has not been</span>
<span class="diff-line diff-added">+recognized, e.g:</span>
<span class="diff-line diff-added">+</span>
<span class="diff-line diff-added">+.. code-block:: console</span>
<span class="diff-line diff-added">+</span>
<span class="diff-line diff-added">+    $ pip install package[non-existent-extra]</span>
<span class="diff-line diff-added">+    WARNING: package 3.0.0 does not provide the extra 'non-existent-extra'</span>
<span class="diff-line diff-added">+    ...</span>
<span class="diff-line diff-added">+</span>
<span class="diff-line diff-added">+For tools that behave like this (rather than raising an error), if an extra is</span>
<span class="diff-line diff-added">+recognized as invalid in a dependency specification, it should be ignored and</span>
<span class="diff-line diff-added">+treated as if the user has not passed an explicit extra. If none of the provided</span>
<span class="diff-line diff-added">+extras are valid, default extras should be installed.</span>
<span class="diff-line diff-added">+</span>
<span class="diff-line"> Installing without default extras</span>
<span class="diff-line"> ---------------------------------</span>
<span class="diff-line"> </span>
<span class="diff-line"> In some cases, package maintainers may want to facilitate installing packages</span>
<span class="diff-line"> without any default extras. In this case, as will be shown in more detail in</span>
<span class="diff-line diff-removed">-`How to teach this`_, the best approach is to define an extra which could be</span>
<span class="diff-line diff-added">+`Examples`_, the best approach is to define an extra which could be</span>
<span class="diff-line"> called e.g. ``minimal`` or ``nodefault`` (the naming would be up to the package</span>
<span class="diff-line"> maintainer) which would be an empty set of dependencies. If this extra is</span>
<span class="diff-line"> specified, no default extras will be included, so that e.g. ``package[minimal]``</span></div>
                        </td>
                        <td>
                            <div class="reason-type tooltip">Clarification
                                <span class="tooltiptext">Rephrasing the same requirement to help understanding WITHOUT changing the meaning/intent.</span>
                            </div>
                            <p>The changes are primarily editorial refinements and expansions of the existing proposal rather than introducing a new requirement. The update adds clarifying elements (Discussions-To, Post-History), expands motivation and examples, and rephrases sections for readability, while preserving the overall intent and backward compatibility of the original PEP. A metadata-key naming adjustment appears in the text but serves to clarify terminology rather than to introduce a new behavior; the dominant effect is clarifying and tightening the existing requirements rather than changing their meaning.</p>
                        </td>
                        
                    </tr>
                    
                    <tr>
                        <td>9</td>
                        <td>
                            <div><strong>From:</strong> 1 &rarr; <strong>To:</strong> 2</div>
                            
                            <div style="font-size: 0.8em; color: #666; margin-bottom: 5px;">
                                0ff88ad (2025-01-22 17:30:58 +0000) &rarr; 0899c62 (2025-02-06 17:02:06 +0000)
                            </div>
                            
                            <div class="diff-text"><span class="diff-line">therefore not want to provide an option to install the package without any</span>
<span class="diff-line"> extras.</span>
<span class="diff-line"> </span>
<span class="diff-line diff-removed">-Backward Compatibility</span>
<span class="diff-line diff-removed">-======================</span>
<span class="diff-line diff-added">+Examples</span>
<span class="diff-line diff-added">+--------</span>
<span class="diff-line"> </span>
<span class="diff-line diff-removed">-All package specification cases valid under :pep:`508` will remain valid.</span>
<span class="diff-line diff-removed">-Therefore, this proposal is fully backward-compatible with existing :pep:`508`</span>
<span class="diff-line diff-removed">-usage.</span>
<span class="diff-line diff-removed">-</span>
<span class="diff-line diff-removed">-Once packages start defining default extras, those defaults will only be honored</span>
<span class="diff-line diff-removed">-with recent versions of packaging tools which implement this PEP, but those</span>
<span class="diff-line diff-removed">-packages will remain fully backward-compatible with older packaging tools - with</span>
<span class="diff-line diff-removed">-the only difference that the default extras will not be installed automatically</span>
<span class="diff-line diff-removed">-when older packaging tools are used.</span>
<span class="diff-line diff-removed">-</span>
<span class="diff-line diff-removed">-The only conceptual backward-compatibility issue to consider is the fact that</span>
<span class="diff-line diff-removed">-this PEP changes extras to no longer be strictly additive, in that specifying</span>
<span class="diff-line diff-removed">-an extra such as ``minimal`` could result in fewer packages being installed.</span>
<span class="diff-line diff-removed">-</span>
<span class="diff-line diff-removed">-Security Implications</span>
<span class="diff-line diff-removed">-=====================</span>
<span class="diff-line diff-removed">-</span>
<span class="diff-line diff-removed">-There are no known security implications for this PEP.</span>
<span class="diff-line diff-removed">-</span>
<span class="diff-line diff-removed">-How to teach this</span>
<span class="diff-line diff-removed">-=================</span>
<span class="diff-line diff-removed">-</span>
<span class="diff-line diff-removed">-The rule above regarding only installing default extras when no extras</span>
<span class="diff-line diff-removed">-are explicitly specified, combined with the introduction of the</span>
<span class="diff-line diff-removed">-``Default-Extra:`` keyword and ``default-optional-dependencies`` metadata key</span>
<span class="diff-line diff-removed">-allows us to address several different use cases. Below we take a look at the</span>
<span class="diff-line diff-removed">-two specific use cases raised in the `Motivation`_ section and how package</span>
<span class="diff-line diff-removed">-maintainers should be taught to address these.</span>
<span class="diff-line diff-added">+In this section we take a look at the use cases described in the `Motivation`_</span>
<span class="diff-line diff-added">+section and how these can now be addressed by using the specification outlined</span>
<span class="diff-line diff-added">+above.</span>
<span class="diff-line"> </span>
<span class="diff-line"> Recommended dependencies and minimal installations</span>
<span class="diff-line diff-added">+^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^</span>
<span class="diff-line"> </span>
<span class="diff-line"> First, we consider the case of packages that want recommended</span>
<span class="diff-line"> but not strictly required dependencies installed by default, while also</span></div>
                        </td>
                        <td>
                            <div class="reason-type tooltip">Clarification
                                <span class="tooltiptext">Rephrasing the same requirement to help understanding WITHOUT changing the meaning/intent.</span>
                            </div>
                            <p>Added an opening statement to the next section.</p>
                        </td>
                        
                    </tr>
                    
                    <tr>
                        <td>10</td>
                        <td>
                            <div><strong>From:</strong> 1 &rarr; <strong>To:</strong> 2</div>
                            
                            <div style="font-size: 0.8em; color: #666; margin-bottom: 5px;">
                                0ff88ad (2025-01-22 17:30:58 +0000) &rarr; 0899c62 (2025-02-06 17:02:06 +0000)
                            </div>
                            
                            <div class="diff-text"><span class="diff-line">.. code-block:: toml</span>
<span class="diff-line"> </span>
<span class="diff-line">     [project]</span>
<span class="diff-line diff-removed">-    default-optional-dependencies = [</span>
<span class="diff-line diff-added">+    default-optional-dependency-keys = [</span>
<span class="diff-line">         "recommended"</span>
<span class="diff-line">     ]</span></div>
                        </td>
                        <td>
                            <div class="reason-type tooltip">Clarification
                                <span class="tooltiptext">Rephrasing the same requirement to help understanding WITHOUT changing the meaning/intent.</span>
                            </div>
                            <p>Renaming of a metadata field in the [project] section from default-optional-dependencies to default-optional-dependency-keys. The change affects only the field name; the semantics remain the same (a list of default extras), so this is a naming clarification rather than new functionality.</p>
                        </td>
                        
                    </tr>
                    
                    <tr>
                        <td>11</td>
                        <td>
                            <div><strong>From:</strong> 1 &rarr; <strong>To:</strong> 2</div>
                            
                            <div style="font-size: 0.8em; color: #666; margin-bottom: 5px;">
                                0ff88ad (2025-01-22 17:30:58 +0000) &rarr; 0899c62 (2025-02-06 17:02:06 +0000)
                            </div>
                            
                            <div class="diff-text"><span class="diff-line">minimal installation or not - in some cases, such as highlighted in the next</span>
<span class="diff-line"> section, this might not be desirable.</span>
<span class="diff-line"> </span>
<span class="diff-line diff-added">+To take a one of the concrete examples of package from the `Motivation`_</span>
<span class="diff-line diff-added">+section, the `astropy`_ package defines a ``recommended`` extra that users are</span>
<span class="diff-line diff-added">+currently instructed to install in the default installation instructions.</span>
<span class="diff-line diff-added">+With this PEP, the ``recommended`` extra could be declared as being a default</span>
<span class="diff-line diff-added">+extra, and a new ``minimal`` extra could be provided for users wishing to</span>
<span class="diff-line diff-added">+retain the ability to install only the strictly required dependencies:</span>
<span class="diff-line diff-added">+</span>
<span class="diff-line diff-added">+.. code-block:: toml</span>
<span class="diff-line diff-added">+</span>
<span class="diff-line diff-added">+    [project]</span>
<span class="diff-line diff-added">+    default-optional-dependency-keys = [</span>
<span class="diff-line diff-added">+        "recommended"</span>
<span class="diff-line diff-added">+    ]</span>
<span class="diff-line diff-added">+</span>
<span class="diff-line diff-added">+    [project.optional-dependencies]</span>
<span class="diff-line diff-added">+    minimal = []</span>
<span class="diff-line diff-added">+    recommended = [</span>
<span class="diff-line diff-added">+        "scipy",</span>
<span class="diff-line diff-added">+        "..."</span>
<span class="diff-line diff-added">+    ]</span>
<span class="diff-line diff-added">+</span>
<span class="diff-line diff-added">+meaning that installing:</span>
<span class="diff-line diff-added">+</span>
<span class="diff-line diff-added">+.. code-block:: console</span>
<span class="diff-line diff-added">+</span>
<span class="diff-line diff-added">+    $ pip install astropy</span>
<span class="diff-line diff-added">+</span>
<span class="diff-line diff-added">+would then also install optional but important optional dependencies such as `scipy</span>
<span class="diff-line diff-added">+<https://www.scipy.org>`_. Advanced users who want a minimal</span>
<span class="diff-line diff-added">+install could then use:</span>
<span class="diff-line diff-added">+</span>
<span class="diff-line diff-added">+.. code-block:: console</span>
<span class="diff-line diff-added">+</span>
<span class="diff-line diff-added">+    $ pip install astropy[minimal]</span>
<span class="diff-line diff-added">+</span>
<span class="diff-line diff-added">+</span>
<span class="diff-line"> Packages requiring at least one backend or frontend</span>
<span class="diff-line diff-added">+^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^</span>
<span class="diff-line"> </span>
<span class="diff-line"> As described in `Motivation`_, some packages may support multiple backends</span>
<span class="diff-line"> and/or frontends, and in some cases it may be desirable to ensure that there</span></div>
                        </td>
                        <td>
                            <div class="reason-type tooltip">Demonstration
                                <span class="tooltiptext">An example or visualization was added to assist in understanding.</span>
                            </div>
                            <p>The diff adds a concrete demonstration/example showing how default extras would work (using astropy as a case study, with a default 'recommended' extra and a new 'minimal' extra, including TOML configuration and pip install commands). This is purely illustrative to aid understanding and does not change the requirement's intent or behavior.</p>
                        </td>
                        
                    </tr>
                    
                    <tr>
                        <td>12</td>
                        <td>
                            <div><strong>From:</strong> 1 &rarr; <strong>To:</strong> 2</div>
                            
                            <div style="font-size: 0.8em; color: #666; margin-bottom: 5px;">
                                0ff88ad (2025-01-22 17:30:58 +0000) &rarr; 0899c62 (2025-02-06 17:02:06 +0000)
                            </div>
                            
                            <div class="diff-text"><span class="diff-line">.. code-block:: toml</span>
<span class="diff-line"> </span>
<span class="diff-line">     [project]</span>
<span class="diff-line diff-removed">-    default-optional-dependencies = [</span>
<span class="diff-line diff-added">+    default-optional-dependency-keys = [</span>
<span class="diff-line">         "backend1"</span>
<span class="diff-line">     ]</span></div>
                        </td>
                        <td>
                            <div class="reason-type tooltip">Clarification
                                <span class="tooltiptext">Rephrasing the same requirement to help understanding WITHOUT changing the meaning/intent.</span>
                            </div>
                            <p>The change from 'default-optional-dependencies' to 'default-optional-dependency-keys' is editorial, changing the metadata field name; the underlying concept—defining a default set of extras that applies when no extras are specified—remains the same. This is a clarification/renaming for consistency and precision, not a new requirement or a change in behavior.</p>
                        </td>
                        
                    </tr>
                    
                    <tr>
                        <td>13</td>
                        <td>
                            <div><strong>From:</strong> 1 &rarr; <strong>To:</strong> 2</div>
                            
                            <div style="font-size: 0.8em; color: #666; margin-bottom: 5px;">
                                0ff88ad (2025-01-22 17:30:58 +0000) &rarr; 0899c62 (2025-02-06 17:02:06 +0000)
                            </div>
                            
                            <div class="diff-text"><span class="diff-line">the backends should always be installed, then the dependencies for these must be given</span>
<span class="diff-line"> as required dependencies rather than using the default extras mechanism.</span>
<span class="diff-line"> </span>
<span class="diff-line diff-added">+To take one of the concrete examples mentioned in `Motivation`_, the `napari`_ package</span>
<span class="diff-line diff-added">+can make use of one of `PyQt5`_, `PyQt6`_, `PySide2`_, or `PySide6`_, and users currently</span>
<span class="diff-line diff-added">+need to explicitly specify ``napari[all]`` in order to have one of these be installed,</span>
<span class="diff-line diff-added">+or e.g., ``napari[pyqt5]`` to explicitly specify one of the frontend packages. Installing</span>
<span class="diff-line diff-added">+``napari`` with no extras results in a non-functional package. With this PEP, ``napari``</span>
<span class="diff-line diff-added">+could define the following configuration:</span>
<span class="diff-line diff-added">+</span>
<span class="diff-line diff-added">+.. code-block:: toml</span>
<span class="diff-line diff-added">+</span>
<span class="diff-line diff-added">+    [project]</span>
<span class="diff-line diff-added">+    default-optional-dependency-keys = [</span>
<span class="diff-line diff-added">+        "pyqt5"</span>
<span class="diff-line diff-added">+    ]</span>
<span class="diff-line diff-added">+</span>
<span class="diff-line diff-added">+    [project.optional-dependencies]</span>
<span class="diff-line diff-added">+    pyqt5 = [</span>
<span class="diff-line diff-added">+        "PyQt5",</span>
<span class="diff-line diff-added">+        "..."</span>
<span class="diff-line diff-added">+    ]</span>
<span class="diff-line diff-added">+    pyside2 = [</span>
<span class="diff-line diff-added">+        "PySide2",</span>
<span class="diff-line diff-added">+        "..."</span>
<span class="diff-line diff-added">+    ]</span>
<span class="diff-line diff-added">+    pyqt6 = [</span>
<span class="diff-line diff-added">+        "PyQt6",</span>
<span class="diff-line diff-added">+        "..."</span>
<span class="diff-line diff-added">+    ]</span>
<span class="diff-line diff-added">+    pyside6 = [</span>
<span class="diff-line diff-added">+        "PySide6",</span>
<span class="diff-line diff-added">+        "..."</span>
<span class="diff-line diff-added">+    ]</span>
<span class="diff-line diff-added">+</span>
<span class="diff-line diff-added">+meaning that:</span>
<span class="diff-line diff-added">+</span>
<span class="diff-line diff-added">+.. code-block:: console</span>
<span class="diff-line diff-added">+</span>
<span class="diff-line diff-added">+    $ pip install napari</span>
<span class="diff-line diff-added">+</span>
<span class="diff-line diff-added">+would work out-of-the-box, but there would still be a mechanism for users to</span>
<span class="diff-line diff-added">+explicitly specify a frontend, e.g.:</span>
<span class="diff-line diff-added">+</span>
<span class="diff-line diff-added">+.. code-block:: console</span>
<span class="diff-line diff-added">+</span>
<span class="diff-line diff-added">+    $ pip install napari[pyside6]</span>
<span class="diff-line diff-added">+</span>
<span class="diff-line"> Supporting minimal installations while not always removing default extras</span>
<span class="diff-line diff-added">+^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^</span>
<span class="diff-line"> </span>
<span class="diff-line"> An additional case we consider here is where a package maintainer wants to support</span>
<span class="diff-line"> minimal installations without any extras, but also wants to support having users</span></div>
                        </td>
                        <td>
                            <div class="reason-type tooltip">Demonstration
                                <span class="tooltiptext">An example or visualization was added to assist in understanding.</span>
                            </div>
                            <p>A concrete napari example was added to illustrate how default-optional-dependency-keys and project.optional-dependencies could be configured to enable default frontend backends (PyQt5/6, PySide2/6). This demonstrates the concept in practice but does not introduce new requirements or change the underlying intent; it serves as a practical demonstration of the existing proposal.</p>
                        </td>
                        
                    </tr>
                    
                    <tr>
                        <td>14</td>
                        <td>
                            <div><strong>From:</strong> 1 &rarr; <strong>To:</strong> 2</div>
                            
                            <div style="font-size: 0.8em; color: #666; margin-bottom: 5px;">
                                0ff88ad (2025-01-22 17:30:58 +0000) &rarr; 0899c62 (2025-02-06 17:02:06 +0000)
                            </div>
                            
                            <div class="diff-text"><span class="diff-line">.. code-block:: toml</span>
<span class="diff-line"> </span>
<span class="diff-line">     [project]</span>
<span class="diff-line diff-removed">-    default-optional-dependencies = [</span>
<span class="diff-line diff-added">+    default-optional-dependency-keys = [</span>
<span class="diff-line">         "recommended"</span>
<span class="diff-line">     ]</span></div>
                        </td>
                        <td>
                            <div class="reason-type tooltip">Clarification
                                <span class="tooltiptext">Rephrasing the same requirement to help understanding WITHOUT changing the meaning/intent.</span>
                            </div>
                            <p>The primary change in the diff is a renaming of the [project] metadata key from default-optional-dependencies to default-optional-dependency-keys (and related wording). This alters the exact identifier used in the specification but does not introduce new requirements or behavior; it clarifies the terminology to reflect that the value is a list of extra-key names (dependency keys) rather than literal dependencies, and aligns surrounding text accordingly. In short, it's a naming/clarification change, not a functional addition or correction.</p>
                        </td>
                        
                    </tr>
                    
                    <tr>
                        <td>15</td>
                        <td>
                            <div><strong>From:</strong> 1 &rarr; <strong>To:</strong> 2</div>
                            
                            <div style="font-size: 0.8em; color: #666; margin-bottom: 5px;">
                                0ff88ad (2025-01-22 17:30:58 +0000) &rarr; 0899c62 (2025-02-06 17:02:06 +0000)
                            </div>
                            
                            <div class="diff-text"><span class="diff-line">The ability for a package to reference itself in the extras is supported by</span>
<span class="diff-line"> existing Python packaging tools.</span>
<span class="diff-line"> </span>
<span class="diff-line diff-removed">-Teaching package authors</span>
<span class="diff-line diff-added">+Once again considering a concrete example, `astropy`_ could with this PEP define a</span>
<span class="diff-line diff-added">+``recommended`` extra (as described in `Recommended dependencies and minimal</span>
<span class="diff-line diff-added">+installations`_). However, it also defines other extras, including for example</span>
<span class="diff-line diff-added">+``jupyter``, which adds packages that</span>
<span class="diff-line diff-added">+enhance the user experience inside `Jupyter <https://jupyter.org/>`_-based</span>
<span class="diff-line diff-added">+environments. It is possible that users opting in to this extra would still want</span>
<span class="diff-line diff-added">+recommended dependencies to be installed. In this case, the following</span>
<span class="diff-line diff-added">+configuration would solve this case:</span>
<span class="diff-line diff-added">+</span>
<span class="diff-line diff-added">+.. code-block:: toml</span>
<span class="diff-line diff-added">+</span>
<span class="diff-line diff-added">+    [project]</span>
<span class="diff-line diff-added">+    default-optional-dependency-keys = [</span>
<span class="diff-line diff-added">+        "recommended"</span>
<span class="diff-line diff-added">+    ]</span>
<span class="diff-line diff-added">+</span>
<span class="diff-line diff-added">+    [project.optional-dependencies]</span>
<span class="diff-line diff-added">+    minimal = []</span>
<span class="diff-line diff-added">+    recommended = [</span>
<span class="diff-line diff-added">+        "scipy",</span>
<span class="diff-line diff-added">+        "..."</span>
<span class="diff-line diff-added">+    ]</span>
<span class="diff-line diff-added">+    jupyter = [</span>
<span class="diff-line diff-added">+        "astropy[recommended]",</span>
<span class="diff-line diff-added">+        "ipywidgets",</span>
<span class="diff-line diff-added">+        "..."</span>
<span class="diff-line diff-added">+    ]</span>
<span class="diff-line diff-added">+</span>
<span class="diff-line diff-added">+Users installing:</span>
<span class="diff-line diff-added">+</span>
<span class="diff-line diff-added">+.. code-block:: console</span>
<span class="diff-line diff-added">+</span>
<span class="diff-line diff-added">+    $ pip install astropy[jupyter]</span>
<span class="diff-line diff-added">+</span>
<span class="diff-line diff-added">+would then get the same as:</span>
<span class="diff-line diff-added">+</span>
<span class="diff-line diff-added">+.. code-block:: console</span>
<span class="diff-line diff-added">+</span>
<span class="diff-line diff-added">+    $ pip install astropy[recommended, jupyter]</span>
<span class="diff-line diff-added">+</span>
<span class="diff-line diff-added">+</span>
<span class="diff-line diff-added">+Backward Compatibility</span>
<span class="diff-line diff-added">+======================</span>
<span class="diff-line diff-added">+</span>
<span class="diff-line diff-added">+Packages not using default extras</span>
<span class="diff-line diff-added">+---------------------------------</span>
<span class="diff-line diff-added">+</span>
<span class="diff-line diff-added">+Once support for this PEP is added to tools in the packaging ecosystem, packages</span>
<span class="diff-line diff-added">+that do not make use of default extras will continue to work as-is and there</span>
<span class="diff-line diff-added">+should be no break in compatibility.</span>
<span class="diff-line diff-added">+</span>
<span class="diff-line diff-added">+Packages using default extras</span>
<span class="diff-line diff-added">+-----------------------------</span>
<span class="diff-line diff-added">+</span>
<span class="diff-line diff-added">+Once packages start defining default extras, those defaults will only be honored</span>
<span class="diff-line diff-added">+with recent versions of packaging tools which implement this PEP, but those</span>
<span class="diff-line diff-added">+packages will remain installable with older packaging tools -- with the main</span>
<span class="diff-line diff-added">+difference being that the default extras will not be installed automatically</span>
<span class="diff-line diff-added">+when older packaging tools are used.</span>
<span class="diff-line diff-added">+</span>
<span class="diff-line diff-added">+As described in `How to teach this`_,</span>
<span class="diff-line diff-added">+package authors need to carefully evaluate when and how they adopt</span>
<span class="diff-line diff-added">+the default extra feature depending on their user base, as some actions (such as</span>
<span class="diff-line diff-added">+moving a required dependency to a default extra) will likely result in breakage</span>
<span class="diff-line diff-added">+for users if a significant fraction of them are still using older package</span>
<span class="diff-line diff-added">+installers that do not support default extras. In this sense, package authors</span>
<span class="diff-line diff-added">+should be aware that this feature, if used in certain ways, can cause</span>
<span class="diff-line diff-added">+backward-compatibility issues for users, and they are thus responsible for</span>
<span class="diff-line diff-added">+ensuring that they minimize the impact to users.</span>
<span class="diff-line"> </span>
<span class="diff-line diff-removed">-Packages making use of any of the approaches above must ensure that they</span>
<span class="diff-line diff-removed">-properly document the options available to users in terms of installation.</span>
<span class="diff-line diff-added">+Packaging-related tools</span>
<span class="diff-line diff-added">+-----------------------</span>
<span class="diff-line diff-added">+</span>
<span class="diff-line diff-added">+The most significant backward-compatibility aspect is related to assumptions</span>
<span class="diff-line diff-added">+packaging tools make about extras -- specifically, this PEP changes the</span>
<span class="diff-line diff-added">+assumption that extras are no longer exclusively additive in terms of adding</span>
<span class="diff-line diff-added">+dependencies to the dependency tree, and specifying some extras can result in</span>
<span class="diff-line diff-added">+fewer dependencies being installed.</span>
<span class="diff-line diff-added">+</span>
<span class="diff-line diff-added">+A specific example of change in behavior can be seen with `pip`_: consider a</span>
<span class="diff-line diff-added">+package ``package`` which has a required dependency of ``numpy``, a (default)</span>
<span class="diff-line diff-added">+extra called ``recommended`` which includes ``scipy``, and a ``minimal`` extra</span>
<span class="diff-line diff-added">+which does not contain any dependencies. If a user installs ``package[minimal]``,</span>
<span class="diff-line diff-added">+only ``package`` and ``numpy`` will be installed. If a user then does:</span>
<span class="diff-line diff-added">+</span>
<span class="diff-line diff-added">+.. code-block:: console</span>
<span class="diff-line diff-added">+</span>
<span class="diff-line diff-added">+    $ pip freeze > requirements.txt</span>
<span class="diff-line diff-added">+</span>
<span class="diff-line diff-added">+then ``requirements.txt`` will contain e.g.::</span>
<span class="diff-line diff-added">+</span>
<span class="diff-line diff-added">+    package==1.0.2</span>
<span class="diff-line diff-added">+    numpy==2.1.0</span>
<span class="diff-line diff-added">+</span>
<span class="diff-line diff-added">+However, if the user then installs the requirements from this file using:</span>
<span class="diff-line diff-added">+</span>
<span class="diff-line diff-added">+.. code-block:: console</span>
<span class="diff-line diff-added">+</span>
<span class="diff-line diff-added">+    $ pip install -r requirements.txt</span>
<span class="diff-line diff-added">+</span>
<span class="diff-line diff-added">+then pip will install ``package`` (which will include the default extra) as well</span>
<span class="diff-line diff-added">+as ``numpy``, so the final environment will contain ``scipy``. A solution in this</span>
<span class="diff-line diff-added">+specific case is for the user to pass ``--no-deps`` to ``pip install`` to avoid</span>
<span class="diff-line diff-added">+resolving the dependency tree, but the point here is to illustrate that there</span>
<span class="diff-line diff-added">+may be changes in behavior in packaging tools due to the change in the</span>
<span class="diff-line diff-added">+assumption about what impact an extra can have.</span>
<span class="diff-line diff-added">+</span>
<span class="diff-line diff-added">+Security Implications</span>
<span class="diff-line diff-added">+=====================</span>
<span class="diff-line diff-added">+</span>
<span class="diff-line diff-added">+There are no known security implications for this PEP.</span>
<span class="diff-line diff-added">+</span>
<span class="diff-line diff-added">+How to teach this</span>
<span class="diff-line diff-added">+=================</span>
<span class="diff-line diff-added">+</span>
<span class="diff-line diff-added">+This section outlines information that should be made available to people in</span>
<span class="diff-line diff-added">+different groups in the community in relation to the implementation of this PEP.</span>
<span class="diff-line diff-added">+Some aspects described below will be relevant even before the PEP is fully</span>
<span class="diff-line diff-added">+implemented in packaging tools as there are some preparations that can be done</span>
<span class="diff-line diff-added">+in advance of this implementation to facilitate any potential transition later</span>
<span class="diff-line diff-added">+on. The groups covered below are:</span>
<span class="diff-line diff-added">+</span>
<span class="diff-line diff-added">+- `Package end users`_</span>
<span class="diff-line diff-added">+- `Package authors`_</span>
<span class="diff-line diff-added">+- `Packaging repository maintainers`_</span>
<span class="diff-line diff-added">+</span>
<span class="diff-line diff-added">+Package end users</span>
<span class="diff-line diff-added">+-----------------</span>
<span class="diff-line diff-added">+</span>
<span class="diff-line diff-added">+Package users should be provided with clear installation instructions that show</span>
<span class="diff-line diff-added">+what extras are available for packages and how they behave, for example</span>
<span class="diff-line diff-added">+explaining that by default some recommended dependencies or a given frontend or</span>
<span class="diff-line diff-added">+backend will be installed, and how to opt out of this or override defaults,</span>
<span class="diff-line diff-added">+depending what is available.</span>
<span class="diff-line diff-added">+</span>
<span class="diff-line diff-added">+Package authors</span>
<span class="diff-line diff-added">+---------------</span>
<span class="diff-line diff-added">+</span>
<span class="diff-line diff-added">+While the mechanism used to define extras and the associated rule about when to</span>
<span class="diff-line diff-added">+use it are clear, package authors need to carefully consider several points</span>
<span class="diff-line diff-added">+before adopting this capability in their packages, to avoid inadvertently breaking</span>
<span class="diff-line diff-added">+backward-compatibility.</span>
<span class="diff-line diff-added">+</span>
<span class="diff-line diff-added">+Supporting older versions of package installers</span>
<span class="diff-line diff-added">+^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^</span>
<span class="diff-line diff-added">+</span>
<span class="diff-line diff-added">+Package installers such as `pip`_ or `uv <https://docs.astral.sh/uv/>`_ will not</span>
<span class="diff-line diff-added">+necessarily implement support for default extras at the same time, and once they</span>
<span class="diff-line diff-added">+do it is likely that package authors will want to keep supporting users who do</span>
<span class="diff-line diff-added">+not have the most recent version of a package installer. In this case, the</span>
<span class="diff-line diff-added">+following recommendations would apply:</span>
<span class="diff-line diff-added">+</span>
<span class="diff-line diff-added">+* Moving a package from being a required dependency to a default extra would be</span>
<span class="diff-line diff-added">+  a breaking change, because older versions of package installers would not</span>
<span class="diff-line diff-added">+  recognise the concept of default extras, and would then install the package</span>
<span class="diff-line diff-added">+  with fewer dependencies, which could affect users that would have been relying</span>
<span class="diff-line diff-added">+  on these. Therefore, changing dependencies from required to a default extra in</span>
<span class="diff-line diff-added">+  an established package should only be done in future once the developers only</span>
<span class="diff-line diff-added">+  want to support users with installers that implement this PEP.</span>
<span class="diff-line diff-added">+</span>
<span class="diff-line diff-added">+* Making an existing extra become a default should be safer, such as making</span>
<span class="diff-line diff-added">+  ``recommended`` in `astropy`_ be a default extra, but in order to support users</span>
<span class="diff-line diff-added">+  with older versions of package installers, the documentation should still mention</span>
<span class="diff-line diff-added">+  the extra explicitly as long as possible (until it is clear that most/all users</span>
<span class="diff-line diff-added">+  are using package installers that implement this PEP). There is no downside to</span>
<span class="diff-line diff-added">+  keeping the extra be explicitly mentioned, but this will ensure that users with</span>
<span class="diff-line diff-added">+  modern tooling who do not read documentation (which may be a non-negligeable</span>
<span class="diff-line diff-added">+  fraction of the user community) will start getting the recommended</span>
<span class="diff-line diff-added">+  dependencies by default.</span>
<span class="diff-line diff-added">+</span>
<span class="diff-line diff-added">+* Adding a new extra, whether it be ``minimal`` or another new extra that is to</span>
<span class="diff-line diff-added">+  be the default, comes with the same caveats that it does prior to this PEP, which</span>
<span class="diff-line diff-added">+  is that users will only be able to use this extra for releases that define</span>
<span class="diff-line diff-added">+  this extra. This might seem obvious, but consider a package that has a version</span>
<span class="diff-line diff-added">+  1.0 prior to using default extras. Suppose that package now defines</span>
<span class="diff-line diff-added">+  ``minimal`` in 2.0, then downstream users and packages that want to depend on</span>
<span class="diff-line diff-added">+  a minimal version of the package cannot declare the following dependency::</span>
<span class="diff-line diff-added">+</span>
<span class="diff-line diff-added">+    package[minimal]>=1.0</span>
<span class="diff-line diff-added">+</span>
<span class="diff-line diff-added">+  because ``package[minimal]==1.0`` does not exist (in practice, pip ignores</span>
<span class="diff-line diff-added">+  unknown extras, so it might be possible to do this, but there is no guarantee</span>
<span class="diff-line diff-added">+  that other tools won't error on an unrecognized extra).</span>
<span class="diff-line diff-added">+</span>
<span class="diff-line diff-added">+  The easiest solution to this problem is for package authors to define a no-op</span>
<span class="diff-line diff-added">+  ``minimal`` extra as soon as possible, even if only planning to adopt default</span>
<span class="diff-line diff-added">+  extras further down the road, as it will allow ``package[minimal]`` to work</span>
<span class="diff-line diff-added">+  for versions prior to when defaults were adopted.</span>
<span class="diff-line diff-added">+</span>
<span class="diff-line diff-added">+Avoiding the addition of many default dependencies</span>
<span class="diff-line diff-added">+^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^</span>
<span class="diff-line diff-added">+</span>
<span class="diff-line diff-added">+One temptation for authors might be to include many dependencies by default since</span>
<span class="diff-line diff-added">+they can provide a way to opt out from these. We recommend however that authors</span>
<span class="diff-line diff-added">+carefully consider what is included by default to avoid unecessarily bloating</span>
<span class="diff-line diff-added">+installations and complicating dependency trees. Using default extras does not</span>
<span class="diff-line diff-added">+mean that all extras need to be defaults, and there is still scope for users to</span>
<span class="diff-line diff-added">+explicitly opt in to non-default extras.</span>
<span class="diff-line diff-added">+</span>
<span class="diff-line diff-added">+Inheriting from default extras</span>
<span class="diff-line diff-added">+^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^</span>
<span class="diff-line diff-added">+</span>
<span class="diff-line diff-added">+If package authors choose to make an extra be installed by default, it is important</span>
<span class="diff-line diff-added">+that they are aware that if users explicitly specify another extra, the default may</span>
<span class="diff-line diff-added">+not be installed, unless they use the approach described in `Supporting minimal</span>
<span class="diff-line diff-added">+installations while not always removing default extras`_.</span>
<span class="diff-line diff-added">+</span>
<span class="diff-line diff-added">+There are cases, such as the interchangeable backends, or the ``minimal`` extras,</span>
<span class="diff-line diff-added">+where ignoring the default if an extra is explicitly specified is the right</span>
<span class="diff-line diff-added">+thing to do. However, for other cases, such as using default extras to include</span>
<span class="diff-line diff-added">+recommended dependencies while still providing a way to do minimal installs, it</span>
<span class="diff-line diff-added">+may be that many of the other extras *should* explicitly 'inherit' the default</span>
<span class="diff-line diff-added">+extra(s), so package authors should carefully consider in which cases they want</span>
<span class="diff-line diff-added">+the default extras to be installed.</span>
<span class="diff-line diff-added">+</span>
<span class="diff-line diff-added">+Incompatible extras</span>
<span class="diff-line diff-added">+^^^^^^^^^^^^^^^^^^^</span>
<span class="diff-line diff-added">+</span>
<span class="diff-line diff-added">+In some cases, it may be that packages have extras that are mutually</span>
<span class="diff-line diff-added">+incompatible. In this case, we recommend against using the default extra</span>
<span class="diff-line diff-added">+feature for any extra that contains a dependency that could be incompatible with</span>
<span class="diff-line diff-added">+another.</span>
<span class="diff-line diff-added">+</span>
<span class="diff-line diff-added">+Consider a package that has extras ``package[A]`` and ``package[B]``. Users</span>
<span class="diff-line diff-added">+could already currently try and install ``package[A]`` and ``package[B]`` or</span>
<span class="diff-line diff-added">+``package[A,B]`` which would result in a broken installation, however it would</span>
<span class="diff-line diff-added">+at least be explicit that both extras were being installed. Making ``A`` into a</span>
<span class="diff-line diff-added">+default extra however could lead to unintuitive issues. A user could do:</span>
<span class="diff-line diff-added">+</span>
<span class="diff-line diff-added">+.. code-block:: console</span>
<span class="diff-line diff-added">+</span>
<span class="diff-line diff-added">+    $ pip install package  # this installs package[A]</span>
<span class="diff-line diff-added">+    $ pip install package[B]</span>
<span class="diff-line diff-added">+</span>
<span class="diff-line diff-added">+and end up with a broken installation, even though A and B were never explicitly</span>
<span class="diff-line diff-added">+both installed. For this reason, we recommend against using default extras</span>
<span class="diff-line diff-added">+for dependencies where this is likely to be an issue.</span>
<span class="diff-line diff-added">+</span>
<span class="diff-line diff-added">+Circular dependencies</span>
<span class="diff-line diff-added">+^^^^^^^^^^^^^^^^^^^^^</span>
<span class="diff-line diff-added">+</span>
<span class="diff-line diff-added">+Authors need to take special care when circular dependencies are present. For instance,</span>
<span class="diff-line diff-added">+consider the following dependency tree::</span>
<span class="diff-line diff-added">+</span>
<span class="diff-line diff-added">+    package1</span>
<span class="diff-line diff-added">+    └── package2</span>
<span class="diff-line diff-added">+        └── package1</span>
<span class="diff-line diff-added">+</span>
<span class="diff-line diff-added">+If ``package1`` has a default extra named ``recommended`` and a ``minimal``</span>
<span class="diff-line diff-added">+extra which is empty, then:</span>
<span class="diff-line diff-added">+</span>
<span class="diff-line diff-added">+.. code-block:: console</span>
<span class="diff-line diff-added">+</span>
<span class="diff-line diff-added">+    $ pip install package1[minimal]</span>
<span class="diff-line diff-added">+</span>
<span class="diff-line diff-added">+will still result in the ``recommended`` extra being installed if ``package2``</span>
<span class="diff-line diff-added">+continues to depend on ``package1`` (with no extras specified). If the dependency</span>
<span class="diff-line diff-added">+tree was updated to instead be::</span>
<span class="diff-line diff-added">+</span>
<span class="diff-line diff-added">+    package1</span>
<span class="diff-line diff-added">+    └── package2</span>
<span class="diff-line diff-added">+        └── package1[minimal]</span>
<span class="diff-line diff-added">+</span>
<span class="diff-line diff-added">+Then ``package1`` would no longer be installable with tools that do not yet</span>
<span class="diff-line diff-added">+implement this PEP (if those tools would fail on unrecognized extras). Authors</span>
<span class="diff-line diff-added">+therefore need to carefully consider a migration plan, coordinating with the</span>
<span class="diff-line diff-added">+authors of ``package2``.</span>
<span class="diff-line diff-added">+</span>
<span class="diff-line diff-added">+</span>
<span class="diff-line diff-added">+Packaging repository maintainers</span>
<span class="diff-line diff-added">+--------------------------------</span>
<span class="diff-line diff-added">+</span>
<span class="diff-line diff-added">+The impact on individuals who repackage Python libraries for different</span>
<span class="diff-line diff-added">+distributions, such as `conda <https://docs.conda.io>`_, `Homebrew</span>
<span class="diff-line diff-added">+<https://brew.sh/>`_, linux package installers (such as ``apt`` and ``yum``) and</span>
<span class="diff-line diff-added">+so on, needs to be considered. Not all package distributions have mechanisms</span>
<span class="diff-line diff-added">+that would line up with the approach described. In fact, some distributions such</span>
<span class="diff-line diff-added">+as conda, do not even have the concept of extras.</span>
<span class="diff-line diff-added">+</span>
<span class="diff-line diff-added">+There are two cases to consider here:</span>
<span class="diff-line diff-added">+</span>
<span class="diff-line diff-added">+* In cases where the repackaging is done by hand, such as for a number of conda-forge</span>
<span class="diff-line diff-added">+  recipes, and especially where there is no equivalent to extras, the</span>
<span class="diff-line diff-added">+  introduction of default extras should not have a large impact since manual</span>
<span class="diff-line diff-added">+  decisions already have to be made as to which dependencies to include (for</span>
<span class="diff-line diff-added">+  example, the conda-forge recipe for the `astropy`_ package mentioned in the</span>
<span class="diff-line diff-added">+  `Motivation`_ includes all the ``recommended`` dependencies by default since</span>
<span class="diff-line diff-added">+  there is no way for users to explicitly request them otherwise).</span>
<span class="diff-line diff-added">+</span>
<span class="diff-line diff-added">+* In cases where the repackaging is done in an automated, way, distribution maintainers</span>
<span class="diff-line diff-added">+  will need to carefully consider how to treat default extras, and this may</span>
<span class="diff-line diff-added">+  imply a non-negligible amount of work and discussion.</span>
<span class="diff-line diff-added">+</span>
<span class="diff-line diff-added">+It is impossible for a PEP such as this to exhaustively consider each of the</span>
<span class="diff-line diff-added">+different package distributions. However, ultimately, default extras should be</span>
<span class="diff-line diff-added">+understood as how package authors would like their package to be installed for</span>
<span class="diff-line diff-added">+the majority of users, and this should inform decisions about how default extras</span>
<span class="diff-line diff-added">+should be handled, whether manually or automatically.</span>
<span class="diff-line"> </span>
<span class="diff-line"> Reference Implementation</span>
<span class="diff-line"> ========================</span></div>
                        </td>
                        <td>
                            <div class="reason-type tooltip">Meaning
                                <span class="tooltiptext">The requirement meaning/intention is changed (says something different).</span>
                            </div>
                            <p>The changes introduce a substantial revision of the guidance around default extras: the section formerly titled 'Teaching package authors' is expanded with concrete examples (e.g., astropy) and new install paths, including 'Users installing' and explicit TOML/console examples. Additionally, new subsections 'Backward Compatibility' and 'Packaging-related tools' are added, shifting the surrounding discussion toward compatibility implications and tooling behavior. Most importantly, the TOML key name used to configure default extras changes from default-optional-dependencies to default-optional-dependency-keys, effectively altering how packages declare default extras via pyproject metadata. Together, these changes modify the meaning/intent of the default-extras mechanism and its adoption guidance, not merely fix typos or summarize existing text.</p>
                        </td>
                        
                    </tr>
                    
                    <tr>
                        <td>16</td>
                        <td>
                            <div><strong>From:</strong> 1 &rarr; <strong>To:</strong> 2</div>
                            
                            <div style="font-size: 0.8em; color: #666; margin-bottom: 5px;">
                                0ff88ad (2025-01-22 17:30:58 +0000) &rarr; 0899c62 (2025-02-06 17:02:06 +0000)
                            </div>
                            
                            <div class="diff-text"><span class="diff-line diff-removed">-------------------------------------------------</span>
<span class="diff-line"> </span>
<span class="diff-line"> Another option to unselect extras would be to implement this at the</span>
<span class="diff-line diff-removed">-level of packaging tools. For instance, pip could include an option such as::</span>
<span class="diff-line diff-added">+level of packaging tools. For instance, pip could include an option such as:</span>
<span class="diff-line diff-added">+</span>
<span class="diff-line diff-added">+.. code-block:: console</span>
<span class="diff-line"> </span>
<span class="diff-line diff-removed">-    pip install package --no-default-extras</span>
<span class="diff-line diff-added">+    $ pip install package --no-default-extras</span>
<span class="diff-line"> </span>
<span class="diff-line"> This option could apply to all or specific packages, similar to</span>
<span class="diff-line diff-removed">-the ``--no-binary`` option, e.g.,::</span>
<span class="diff-line diff-added">+the ``--no-binary`` option, e.g.,:</span>
<span class="diff-line"> </span>
<span class="diff-line diff-removed">-    pip install package --no-default-extras :all:</span>
<span class="diff-line diff-added">+.. code-block:: console</span>
<span class="diff-line diff-added">+</span>
<span class="diff-line diff-added">+    $ pip install package --no-default-extras :all:</span>
<span class="diff-line"> </span>
<span class="diff-line"> The advantage of this approach is that tools supporting default extras could</span>
<span class="diff-line"> also support unselecting them. This approach would be similar to the ``--no-install-recommends``</span></div>
                        </td>
                        <td>
                            <div class="reason-type tooltip">Other
                                <span class="tooltiptext">The change does not fit into any of the above categories (e.g. metadata removal, formatting changes, boilerplate).</span>
                            </div>
                            <p>The diff is purely formatting: converting inline command examples into explicit code-block sections with code-block directives and shell prompts, adjusting indentation to fit the code-block styling. No requirements text, constraints, or meanings were added, removed, or changed.</p>
                        </td>
                        
                    </tr>
                    
                    <tr>
                        <td>17</td>
                        <td>
                            <div><strong>From:</strong> 1 &rarr; <strong>To:</strong> 2</div>
                            
                            <div style="font-size: 0.8em; color: #666; margin-bottom: 5px;">
                                0ff88ad (2025-01-22 17:30:58 +0000) &rarr; 0899c62 (2025-02-06 17:02:06 +0000)
                            </div>
                            
                            <div class="diff-text"><span class="diff-line">maintainers do not actually want to support an installation without any extras,</span>
<span class="diff-line"> for example in cases where at least one backend or frontend must be installed.</span>
<span class="diff-line"> </span>
<span class="diff-line diff-added">+Open issues</span>
<span class="diff-line diff-added">+===========</span>
<span class="diff-line diff-added">+</span>
<span class="diff-line diff-added">+Should ``package[]`` disable default extras?</span>
<span class="diff-line diff-added">+--------------------------------------------</span>
<span class="diff-line diff-added">+</span>
<span class="diff-line diff-added">+Currently, the PEP as written above does not allow ``package[]`` to be</span>
<span class="diff-line diff-added">+equivalent to installing the package with no extras, but there would be some</span>
<span class="diff-line diff-added">+benefits to allowing this:</span>
<span class="diff-line diff-added">+</span>
<span class="diff-line diff-added">+* It would avoid different packages using different names for a 'no default'</span>
<span class="diff-line diff-added">+  extras (e.g. ``minimal``, ``no-default``, ``no-defaults``) and reduce the</span>
<span class="diff-line diff-added">+  burden for people who don’t want to have to scan through source code or</span>
<span class="diff-line diff-added">+  documentation to figure out whether there is the equivalent of a ``minimal``</span>
<span class="diff-line diff-added">+  extra.</span>
<span class="diff-line diff-added">+</span>
<span class="diff-line diff-added">+* It would allow people who want to use existing packages as-is and future</span>
<span class="diff-line diff-added">+  versions of those packages with no default extras to use ``package[]`` because</span>
<span class="diff-line diff-added">+  that syntax works right now, so it would provide a consistent way over time to</span>
<span class="diff-line diff-added">+  get a minimal install.</span>
<span class="diff-line diff-added">+</span>
<span class="diff-line diff-added">+On the other hand, it is not clear at this point whether any tools are currently</span>
<span class="diff-line diff-added">+relying on ``package[]`` being identical to ``package`` in a way that would</span>
<span class="diff-line diff-added">+break compatibility if this was done, so this needs to be investigated.</span>
<span class="diff-line diff-added">+</span>
<span class="diff-line"> Copyright</span>
<span class="diff-line"> =========</span></div>
                        </td>
                        <td>
                            <div class="reason-type tooltip">New
                                <span class="tooltiptext">A new requirement was added.</span>
                            </div>
                            <p>Added a new 'Open issues' section with a discussion item 'Should ``package[]`` disable default extras?' (along with supporting rationale) that was not present in the old version. This introduces a fresh discussion item rather than modifying or clarifying existing requirements.</p>
                        </td>
                        
                    </tr>
                    
                    <tr>
                        <td>18</td>
                        <td>
                            <div><strong>From:</strong> 2 &rarr; <strong>To:</strong> 3</div>
                            
                            <div style="font-size: 0.8em; color: #666; margin-bottom: 5px;">
                                0899c62 (2025-02-06 17:02:06 +0000) &rarr; 4c41501 (2025-06-08 17:27:42 +0100)
                            </div>
                            
                            <div class="diff-text"><span class="diff-line">Various use cases for default extras and possible solutions in this PEP were discussed</span>
<span class="diff-line"> extensively on `this DPO thread <https://discuss.python.org/t/adding-a-default-extra-require-environment/4898>`__.</span>
<span class="diff-line diff-removed">-These fall into two broad cases that that provide the</span>
<span class="diff-line diff-added">+These fall into two broad cases that provide the</span>
<span class="diff-line"> motivation for the present PEP.</span>
<span class="diff-line"> </span>
<span class="diff-line"> Recommended but not required dependencies</span></div>
                        </td>
                        <td>
                            <div class="reason-type tooltip">Typo
                                <span class="tooltiptext">The change was made to correct a typo (wrong spelling/grammar only).</span>
                            </div>
                            <p>Fixed a duplicate word in the Motivation section: changed 'that that provide' to 'that provide', a minor grammatical correction that does not alter meaning.</p>
                        </td>
                        
                    </tr>
                    
                    <tr>
                        <td>19</td>
                        <td>
                            <div><strong>From:</strong> 2 &rarr; <strong>To:</strong> 3</div>
                            
                            <div style="font-size: 0.8em; color: #666; margin-bottom: 5px;">
                                0899c62 (2025-02-06 17:02:06 +0000) &rarr; 4c41501 (2025-06-08 17:27:42 +0100)
                            </div>
                            
                            <div class="diff-text"><span class="diff-line">extend the functionality or performance of a package. In some cases, it can be</span>
<span class="diff-line"> difficult to determine which dependencies should be required and which should be</span>
<span class="diff-line"> categorized as extras. A balance must be struck between the needs of typical</span>
<span class="diff-line diff-removed">-users (who may prefer most features to be available 'by default') and users who</span>
<span class="diff-line diff-added">+users, who may prefer most features to be available by default, and users who</span>
<span class="diff-line"> want minimal installations without large, optional dependencies. One solution</span>
<span class="diff-line"> with existing Python packaging infrastructure is for package maintainers to</span>
<span class="diff-line"> define an extra called, for example, ``recommended``, which</span></div>
                        </td>
                        <td>
                            <div class="reason-type tooltip">Typo
                                <span class="tooltiptext">The change was made to correct a typo (wrong spelling/grammar only).</span>
                            </div>
                            <p>Typographical/grammatical correction: replaced the hyphenated 'typical -users' with 'typical users' and adjusted punctuation, preserving the original meaning.</p>
                        </td>
                        
                    </tr>
                    
                    <tr>
                        <td>20</td>
                        <td>
                            <div><strong>From:</strong> 2 &rarr; <strong>To:</strong> 3</div>
                            
                            <div style="font-size: 0.8em; color: #666; margin-bottom: 5px;">
                                0899c62 (2025-02-06 17:02:06 +0000) &rarr; 4c41501 (2025-06-08 17:27:42 +0100)
                            </div>
                            
                            <div class="diff-text"><span class="diff-line">include extra dependencies by default include:</span>
<span class="diff-line"> </span>
<span class="diff-line"> * `astropy <https://www.astropy.org/>`_: ``astropy[recommended]``</span>
<span class="diff-line diff-added">+* `sunpy <https://www.sunpy.org/>`_: ``sunpy[all]``</span>
<span class="diff-line"> * `fastapi <https://fastapi.tiangolo.com/>`_: ``fastapi[standard]``</span>
<span class="diff-line diff-removed">-* `tensorflow <https://www.tensorflow.org>`_: ``tensorflow[and-cuda]``</span>
<span class="diff-line"> </span>
<span class="diff-line"> Packages supporting multiple backends or frontends</span>
<span class="diff-line"> --------------------------------------------------</span></div>
                        </td>
                        <td>
                            <div class="reason-type tooltip">Meaning
                                <span class="tooltiptext">The requirement meaning/intention is changed (says something different).</span>
                            </div>
                            <p>The primary change is updating the default-extras mapping: sunpy[all] is added to the recommended defaults while tensorflow[and-cuda] is removed, changing which extras are installed by default without altering the overall structure of the requirement.</p>
                        </td>
                        
                    </tr>
                    
                    <tr>
                        <td>21</td>
                        <td>
                            <div><strong>From:</strong> 2 &rarr; <strong>To:</strong> 3</div>
                            
                            <div style="font-size: 0.8em; color: #666; margin-bottom: 5px;">
                                0899c62 (2025-02-06 17:02:06 +0000) &rarr; 4c41501 (2025-06-08 17:27:42 +0100)
                            </div>
                            
                            <div class="diff-text"><span class="diff-line"><https://pypi.org/project/PyQt6/>`_, `PySide2</span>
<span class="diff-line">   <https://pypi.org/project/PySide2/>`_, or `PySide6</span>
<span class="diff-line">   <https://pypi.org/project/PySide6/>`_</span>
<span class="diff-line diff-removed">-* BLAS/LAPACK, which have different possible implementations (e.g. OpenBLAS, and MKL)</span>
<span class="diff-line diff-removed">-* FFT libraries, which also have different implementations (e.g. ``scipy.fft`` and pyFFTW)</span>
<span class="diff-line diff-added">+* Backend databases, such as `MySQL <https://www.mysql.com/>`_, `PostgreSQL</span>
<span class="diff-line diff-added">+  <https://www.postgresql.org/>`_, `SQLite <https://www.sqlite.org/>`_</span>
<span class="diff-line"> </span>
<span class="diff-line"> With current packaging standards, maintainers have to either</span>
<span class="diff-line diff-removed">-require one of the backends or frontends, or require users</span>
<span class="diff-line diff-removed">-to always specify extras, e.g. ``package[backend]`` and therefore risk users</span>
<span class="diff-line diff-added">+require one of the backends or frontends or require users</span>
<span class="diff-line diff-added">+to always specify extras, e.g., ``package[backend]``, and therefore risk users</span>
<span class="diff-line"> having an unusable installation if they only install ``package``. Having a</span>
<span class="diff-line"> way to specify one or more default backend or frontend and providing a way to</span>
<span class="diff-line"> override these defaults would provide a much better experience for users, and</span>
<span class="diff-line"> the approach described in this PEP will allow this.</span>
<span class="diff-line"> </span>
<span class="diff-line"> Note that this PEP does not aim to address the issue of disallowing conflicting</span>
<span class="diff-line diff-removed">-or incompatible extras - for example if a package requires exactly one frontend</span>
<span class="diff-line diff-added">+or incompatible extras, for example if a package requires exactly one frontend</span>
<span class="diff-line"> or backend package. There is currently no mechanism in Python packaging</span>
<span class="diff-line"> infrastructure to disallow conflicting or incompatible extras to be installed,</span>
<span class="diff-line"> and this PEP does not change that.</span></div>
                        </td>
                        <td>
                            <div class="reason-type tooltip">Meaning
                                <span class="tooltiptext">The requirement meaning/intention is changed (says something different).</span>
                            </div>
                            <p>The change replaces the examples of supported backends in the 'Packages supporting multiple backends or frontends' section. Old text listed BLAS/LAPACK and FFT libraries; new text uses backend databases (MySQL, PostgreSQL, SQLite). This shifts the illustrative focus and slightly adjusts wording (e.g., using 'e.g.,' and minor phrasing changes), altering the implied scope of default-backend/backends examples rather than merely clarifying or correcting grammar.</p>
                        </td>
                        
                    </tr>
                    
                    <tr>
                        <td>22</td>
                        <td>
                            <div><strong>From:</strong> 2 &rarr; <strong>To:</strong> 3</div>
                            
                            <div style="font-size: 0.8em; color: #666; margin-bottom: 5px;">
                                0899c62 (2025-02-06 17:02:06 +0000) &rarr; 4c41501 (2025-06-08 17:27:42 +0100)
                            </div>
                            
                            <div class="diff-text"><span class="diff-line">* `glueviz <https://www.glueviz.org>`_: ``glueviz[qt]``</span>
<span class="diff-line"> </span>
<span class="diff-line"> In all three cases, installing the package without any extras results in a</span>
<span class="diff-line diff-removed">-broken installation (and this is a commonly reported issue for some of these</span>
<span class="diff-line diff-removed">-packages).</span>
<span class="diff-line diff-added">+broken installation, and this is a commonly reported support issue for some of these</span>
<span class="diff-line diff-added">+packages.</span>
<span class="diff-line"> </span>
<span class="diff-line"> Rationale</span>
<span class="diff-line"> =========</span>
<span class="diff-line"> </span>
<span class="diff-line diff-removed">-A number of possible solutions have been extensively and vigorously discussed by</span>
<span class="diff-line diff-added">+A number of possible solutions have been discussed extensively by</span>
<span class="diff-line"> the community for several years, including in `this DPO thread</span>
<span class="diff-line"> <https://discuss.python.org/t/adding-a-default-extra-require-environment/4898>`__</span>
<span class="diff-line"> as well as in numerous issues and pull requests. The solution that is</span></div>
                        </td>
                        <td>
                            <div class="reason-type tooltip">Summarization/shortening
                                <span class="tooltiptext">The change is made to summarize/shorten without changing meaning.</span>
                            </div>
                            <p>The change shortens the sentence by removing the word 'vigorously' from 'extensively and vigorously discussed' to 'discussed extensively', thereby summarizing the sentence without changing its meaning.</p>
                        </td>
                        
                    </tr>
                    
                    <tr>
                        <td>23</td>
                        <td>
                            <div><strong>From:</strong> 2 &rarr; <strong>To:</strong> 3</div>
                            
                            <div style="font-size: 0.8em; color: #666; margin-bottom: 5px;">
                                0899c62 (2025-02-06 17:02:06 +0000) &rarr; 4c41501 (2025-06-08 17:27:42 +0100)
                            </div>
                            
                            <div class="diff-text"><span class="diff-line">* is flexible enough to accommodate both of the major use cases described in `Motivation`_</span>
<span class="diff-line"> * re-uses the syntax from :pep:`508`</span>
<span class="diff-line"> </span>
<span class="diff-line diff-removed">-It is the only solution out of all those discussed that meets all three criteria.</span>
<span class="diff-line diff-added">+It is the only solution, out of all those discussed, that meets all three criteria.</span>
<span class="diff-line"> </span>
<span class="diff-line"> Specification</span>
<span class="diff-line"> =============</span></div>
                        </td>
                        <td>
                            <div class="reason-type tooltip">Typo
                                <span class="tooltiptext">The change was made to correct a typo (wrong spelling/grammar only).</span>
                            </div>
                            <p>A small punctuation/grammar correction: added commas to the sentence to improve readability without changing meaning ('It is the only solution out of all those discussed that...' -> 'It is the only solution, out of all those discussed, that...').</p>
                        </td>
                        
                    </tr>
                    
                    <tr>
                        <td>24</td>
                        <td>
                            <div><strong>From:</strong> 2 &rarr; <strong>To:</strong> 3</div>
                            
                            <div style="font-size: 0.8em; color: #666; margin-bottom: 5px;">
                                0899c62 (2025-02-06 17:02:06 +0000) &rarr; 4c41501 (2025-06-08 17:27:42 +0100)
                            </div>
                            
                            <div class="diff-text"><span class="diff-line">A new multiple-use metadata field, ``Default-Extra``, will be added to the `core package</span>
<span class="diff-line"> metadata <https://packaging.python.org/en/latest/specifications/core-metadata/#core-metadata>`_.</span>
<span class="diff-line"> For this field, each entry must be a string specifying an extra that will be</span>
<span class="diff-line diff-removed">-automatically included when the package is installed without any extras specified explicitly.</span>
<span class="diff-line diff-added">+automatically included when the package is installed without any extras being specified explicitly.</span>
<span class="diff-line"> </span>
<span class="diff-line"> Only entries already specified in a `Provides-Extra</span>
<span class="diff-line"> <https://packaging.python.org/en/latest/specifications/core-metadata/#provides-extra-multiple-use>`_</span></div>
                        </td>
                        <td>
                            <div class="reason-type tooltip">Typo
                                <span class="tooltiptext">The change was made to correct a typo (wrong spelling/grammar only).</span>
                            </div>
                            <p>Minor grammar adjustment: changed 'without any extras specified explicitly' to 'without any extras being specified explicitly' to improve readability without changing meaning.</p>
                        </td>
                        
                    </tr>
                    
                    <tr>
                        <td>25</td>
                        <td>
                            <div><strong>From:</strong> 2 &rarr; <strong>To:</strong> 3</div>
                            
                            <div style="font-size: 0.8em; color: #666; margin-bottom: 5px;">
                                0899c62 (2025-02-06 17:02:06 +0000) &rarr; 4c41501 (2025-06-08 17:27:42 +0100)
                            </div>
                            
                            <div class="diff-text"><span class="diff-line">"backend3"</span>
<span class="diff-line">     ]</span>
<span class="diff-line"> </span>
<span class="diff-line diff-removed">-</span>
<span class="diff-line"> Overriding default extras</span>
<span class="diff-line"> -------------------------</span></div>
                        </td>
                        <td>
                            <div class="reason-type tooltip">Other
                                <span class="tooltiptext">The change does not fit into any of the above categories (e.g. metadata removal, formatting changes, boilerplate).</span>
                            </div>
                            <p>No requirement-level change detected between old and new versions. The diff snippet appears to inject an analysis/template block and does not modify any substantive requirement text.</p>
                        </td>
                        
                    </tr>
                    
                    <tr>
                        <td>26</td>
                        <td>
                            <div><strong>From:</strong> 2 &rarr; <strong>To:</strong> 3</div>
                            
                            <div style="font-size: 0.8em; color: #666; margin-bottom: 5px;">
                                0899c62 (2025-02-06 17:02:06 +0000) &rarr; 4c41501 (2025-06-08 17:27:42 +0100)
                            </div>
                            
                            <div class="diff-text"><span class="diff-line">then the default extra should be installed because ``package`` appears at least</span>
<span class="diff-line"> once with no extras specified.</span>
<span class="diff-line"> </span>
<span class="diff-line diff-removed">-Note that ``package[]`` would continue to be equivalent to ``package`` and would</span>
<span class="diff-line diff-removed">-not be provided as a way to install without default extras (see the `Rejected</span>
<span class="diff-line diff-removed">-Ideas`_ section for the rationale).</span>
<span class="diff-line diff-added">+An empty set of extras, such as ``package[]`` should be interpreted as meaning</span>
<span class="diff-line diff-added">+that the package should be installed *without* any default extras (unless</span>
<span class="diff-line diff-added">+``package`` appears elsewhere in the dependency tree, in which case, the default</span>
<span class="diff-line diff-added">+extra *would* be installed as mentioned above). This</span>
<span class="diff-line diff-added">+would provide a universal way of obtaining a minimal installation of a package.</span>
<span class="diff-line"> </span>
<span class="diff-line"> We also note that some tools such as `pip`_ currently ignore unrecognized</span>
<span class="diff-line"> extras, and emit a warning to the user to indicate that the extra has not been</span></div>
                        </td>
                        <td>
                            <div class="reason-type tooltip">Meaning
                                <span class="tooltiptext">The requirement meaning/intention is changed (says something different).</span>
                            </div>
                            <p>The meaning/behavior of the empty extras syntax (package[]) was changed: from the old version's note that package[] remains equivalent to package and should not be provided as a way to install without default extras, to the new version's explicit interpretation that package[] means install without default extras unless the package appears elsewhere in the dependency tree, in which case the default extras would be installed. This changes the default-extras behavior.</p>
                        </td>
                        
                    </tr>
                    
                    <tr>
                        <td>27</td>
                        <td>
                            <div><strong>From:</strong> 2 &rarr; <strong>To:</strong> 3</div>
                            
                            <div style="font-size: 0.8em; color: #666; margin-bottom: 5px;">
                                0899c62 (2025-02-06 17:02:06 +0000) &rarr; 4c41501 (2025-06-08 17:27:42 +0100)
                            </div>
                            
                            <div class="diff-text"><span class="diff-line">...</span>
<span class="diff-line"> </span>
<span class="diff-line"> For tools that behave like this (rather than raising an error), if an extra is</span>
<span class="diff-line diff-removed">-recognized as invalid in a dependency specification, it should be ignored and</span>
<span class="diff-line diff-removed">-treated as if the user has not passed an explicit extra. If none of the provided</span>
<span class="diff-line diff-removed">-extras are valid, default extras should be installed.</span>
<span class="diff-line diff-removed">-</span>
<span class="diff-line diff-removed">-Installing without default extras</span>
<span class="diff-line diff-removed">-</span>
<span class="diff-line diff-removed">-In some cases, package maintainers may want to facilitate installing packages</span>
<span class="diff-line diff-removed">-without any default extras. In this case, as will be shown in more detail in</span>
<span class="diff-line diff-removed">-`Examples`_, the best approach is to define an extra which could be</span>
<span class="diff-line diff-removed">-called e.g. ``minimal`` or ``nodefault`` (the naming would be up to the package</span>
<span class="diff-line diff-removed">-maintainer) which would be an empty set of dependencies. If this extra is</span>
<span class="diff-line diff-removed">-specified, no default extras will be included, so that e.g. ``package[minimal]``</span>
<span class="diff-line diff-removed">-would include only required dependencies and no extras. Note that this requires</span>
<span class="diff-line diff-removed">-no additional specification and is a natural consequence of the rule described</span>
<span class="diff-line diff-removed">-in `Overriding default extras`_.</span>
<span class="diff-line diff-removed">-</span>
<span class="diff-line diff-removed">-There are however valid use cases where package maintainers may not want to</span>
<span class="diff-line diff-removed">-provide this. For example, in the case of the multiple possible frontends or</span>
<span class="diff-line diff-removed">-backends, it may be that the package would not be functional without any of the</span>
<span class="diff-line diff-removed">-options. To take a specific example, a package may need either PyQt or PySide to</span>
<span class="diff-line diff-removed">-be installed but will not work if none are provided, so a package maintainer may</span>
<span class="diff-line diff-removed">-therefore not want to provide an option to install the package without any</span>
<span class="diff-line diff-removed">-extras.</span>
<span class="diff-line diff-added">+recognized as invalid in a dependency specification, it should be ignored, and</span>
<span class="diff-line diff-added">+if all specified extras are invalid, then this should be considered equivalent</span>
<span class="diff-line diff-added">+to ``package[]`` (rather than ``package``) and *not* install any default extras.</span>
<span class="diff-line diff-added">+</span>
<span class="diff-line diff-added">+Finally, we note (as also discussed in `Relying on tooling to deselect</span>
<span class="diff-line diff-added">+any default extras`_) that package installers are allowed to implement their</span>
<span class="diff-line diff-added">+own options to control the above behavior, for example implementing an option</span>
<span class="diff-line diff-added">+that disables default extras for some or all packages regardless of where these</span>
<span class="diff-line diff-added">+packages appear in the dependency tree. If such tool-specific options are</span>
<span class="diff-line diff-added">+implemented, tool developers should make these opt-in,</span>
<span class="diff-line diff-added">+and users should experience the above PEP 771 behavior as default.</span>
<span class="diff-line"> </span>
<span class="diff-line"> Examples</span>
<span class="diff-line"> --------</span></div>
                        </td>
                        <td>
                            <div class="reason-type tooltip">Generalization
                                <span class="tooltiptext">The requirement was changed to be more general (old was too specific).</span>
                            </div>
                            <p>The old version touched some too specific issues, while the new version generalizes it.</p>
                        </td>
                        
                    </tr>
                    
                    <tr>
                        <td>28</td>
                        <td>
                            <div><strong>From:</strong> 2 &rarr; <strong>To:</strong> 3</div>
                            
                            <div style="font-size: 0.8em; color: #666; margin-bottom: 5px;">
                                0899c62 (2025-02-06 17:02:06 +0000) &rarr; 4c41501 (2025-06-08 17:27:42 +0100)
                            </div>
                            
                            <div class="diff-text"><span class="diff-line">Recommended dependencies and minimal installations</span>
<span class="diff-line"> ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^</span>
<span class="diff-line"> </span>
<span class="diff-line diff-removed">-First, we consider the case of packages that want recommended</span>
<span class="diff-line diff-removed">-but not strictly required dependencies installed by default, while also</span>
<span class="diff-line diff-removed">-providing a way to only install the required dependencies.</span>
<span class="diff-line diff-added">+First, we consider the case of packages that want recommended but not strictly</span>
<span class="diff-line diff-added">+required dependencies installed by default, while also providing a way to only</span>
<span class="diff-line diff-added">+install the required dependencies.</span>
<span class="diff-line"> </span>
<span class="diff-line"> In order to do this, a package maintainer would define an extra called</span>
<span class="diff-line"> ``recommended`` containing the recommended but not required dependencies, and</span></div>
                        </td>
                        <td>
                            <div class="reason-type tooltip">Other
                                <span class="tooltiptext">The change does not fit into any of the above categories (e.g. metadata removal, formatting changes, boilerplate).</span>
                            </div>
                            <p>Editorial formatting and minor content tweaks: the diff mainly reflows text (line wrapping) in the Motivation section and updates a couple of example bullets (changing tensorflow to sunpy and the extras mapping). The core requirements, their intent, and structure remain unchanged, so this is not a semantic change.</p>
                        </td>
                        
                    </tr>
                    
                    <tr>
                        <td>29</td>
                        <td>
                            <div><strong>From:</strong> 2 &rarr; <strong>To:</strong> 3</div>
                            
                            <div style="font-size: 0.8em; color: #666; margin-bottom: 5px;">
                                0899c62 (2025-02-06 17:02:06 +0000) &rarr; 4c41501 (2025-06-08 17:27:42 +0100)
                            </div>
                            
                            <div class="diff-text"><span class="diff-line">"package2"</span>
<span class="diff-line">     ]</span>
<span class="diff-line"> </span>
<span class="diff-line diff-removed">-In this specific case, a package maintainer may want to allow users to also</span>
<span class="diff-line diff-removed">-install the package without the recommended dependencies, in which case they</span>
<span class="diff-line diff-removed">-could define an empty extra:</span>
<span class="diff-line diff-removed">-</span>
<span class="diff-line diff-removed">-.. code-block:: toml</span>
<span class="diff-line diff-removed">-</span>
<span class="diff-line diff-removed">-    [project.optional-dependencies]</span>
<span class="diff-line diff-removed">-    minimal = []</span>
<span class="diff-line diff-removed">-    recommended = [</span>
<span class="diff-line diff-removed">-        "package1",</span>
<span class="diff-line diff-removed">-        "package2"</span>
<span class="diff-line diff-removed">-    ]</span>
<span class="diff-line diff-removed">-</span>
<span class="diff-line diff-removed">-This would then allow users to install ``package[minimal]`` which, since</span>
<span class="diff-line diff-removed">-there would be an extra explicitly specified, would mean the default extra</span>
<span class="diff-line diff-removed">-does not get installed, and since the ``minimal`` extra is empty, no</span>
<span class="diff-line diff-removed">-additional dependencies would be installed.</span>
<span class="diff-line diff-removed">-</span>
<span class="diff-line diff-removed">-Maintainers would have the choice as to whether to offer the capability to do a</span>
<span class="diff-line diff-removed">-minimal installation or not - in some cases, such as highlighted in the next</span>
<span class="diff-line diff-removed">-section, this might not be desirable.</span>
<span class="diff-line diff-added">+If this package was called ``package``, users installing ``package`` would</span>
<span class="diff-line diff-added">+then get the equivalent of ``package[recommended]``. Users could alternatively</span>
<span class="diff-line diff-added">+install ``package[]`` which would install the package without the default extras.</span>
<span class="diff-line"> </span>
<span class="diff-line"> To take a one of the concrete examples of package from the `Motivation`_</span>
<span class="diff-line"> section, the `astropy`_ package defines a ``recommended`` extra that users are</span>
<span class="diff-line"> currently instructed to install in the default installation instructions.</span>
<span class="diff-line"> With this PEP, the ``recommended`` extra could be declared as being a default</span>
<span class="diff-line diff-removed">-extra, and a new ``minimal`` extra could be provided for users wishing to</span>
<span class="diff-line diff-removed">-retain the ability to install only the strictly required dependencies:</span>
<span class="diff-line diff-added">+extra:</span>
<span class="diff-line"> </span>
<span class="diff-line"> .. code-block:: toml</span></div>
                        </td>
                        <td>
                            <div class="reason-type tooltip">Summarization/shortening
                                <span class="tooltiptext">The change is made to summarize/shorten without changing meaning.</span>
                            </div>
                            <p>The old version was lengthy, with extensive examples and rationale about default extras and minimal installations. The new version condenses this content, removing redundancy while preserving the core meaning, i.e., a summarization/shortening change.</p>
                        </td>
                        
                    </tr>
                    
                    <tr>
                        <td>30</td>
                        <td>
                            <div><strong>From:</strong> 2 &rarr; <strong>To:</strong> 3</div>
                            
                            <div style="font-size: 0.8em; color: #666; margin-bottom: 5px;">
                                0899c62 (2025-02-06 17:02:06 +0000) &rarr; 4c41501 (2025-06-08 17:27:42 +0100)
                            </div>
                            
                            <div class="diff-text"><span class="diff-line">]</span>
<span class="diff-line"> </span>
<span class="diff-line">     [project.optional-dependencies]</span>
<span class="diff-line diff-removed">-    minimal = []</span>
<span class="diff-line">     recommended = [</span>
<span class="diff-line">         "scipy",</span>
<span class="diff-line">         "..."</span></div>
                        </td>
                        <td>
                            <div class="reason-type tooltip">Other
                                <span class="tooltiptext">The change does not fit into any of the above categories (e.g. metadata removal, formatting changes, boilerplate).</span>
                            </div>
                            <p>The primary change is the deletion of the 'minimal' extra under [project.optional-dependencies] (minimal = []). This removes a previously defined optional-dependency path, changing the documented behavior and semantics of default extras. It is not a typo, new requirement, or clarification, but a removal that alters the requirement set.</p>
                        </td>
                        
                    </tr>
                    
                    <tr>
                        <td>31</td>
                        <td>
                            <div><strong>From:</strong> 2 &rarr; <strong>To:</strong> 3</div>
                            
                            <div style="font-size: 0.8em; color: #666; margin-bottom: 5px;">
                                0899c62 (2025-02-06 17:02:06 +0000) &rarr; 4c41501 (2025-06-08 17:27:42 +0100)
                            </div>
                            
                            <div class="diff-text"><span class="diff-line">$ pip install astropy</span>
<span class="diff-line"> </span>
<span class="diff-line diff-removed">-would then also install optional but important optional dependencies such as `scipy</span>
<span class="diff-line diff-removed">-<https://www.scipy.org>`_. Advanced users who want a minimal</span>
<span class="diff-line diff-removed">-install could then use:</span>
<span class="diff-line diff-added">+would then install optional but recommended dependencies such as</span>
<span class="diff-line diff-added">+`scipy <https://www.scipy.org>`_. Advanced users who want a minimal install</span>
<span class="diff-line diff-added">+could then use:</span>
<span class="diff-line"> </span>
<span class="diff-line"> .. code-block:: console</span>
<span class="diff-line"> </span>
<span class="diff-line diff-removed">-    $ pip install astropy[minimal]</span>
<span class="diff-line diff-removed">-</span>
<span class="diff-line diff-added">+    $ pip install astropy[]</span>
<span class="diff-line"> </span>
<span class="diff-line"> Packages requiring at least one backend or frontend</span>
<span class="diff-line"> ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^</span></div>
                        </td>
                        <td>
                            <div class="reason-type tooltip">Clarification
                                <span class="tooltiptext">Rephrasing the same requirement to help understanding WITHOUT changing the meaning/intent.</span>
                            </div>
                            <p>Wording change without influencing the meaning.</p>
                        </td>
                        
                    </tr>
                    
                    <tr>
                        <td>32</td>
                        <td>
                            <div><strong>From:</strong> 2 &rarr; <strong>To:</strong> 3</div>
                            
                            <div style="font-size: 0.8em; color: #666; margin-bottom: 5px;">
                                0899c62 (2025-02-06 17:02:06 +0000) &rarr; 4c41501 (2025-06-08 17:27:42 +0100)
                            </div>
                            
                            <div class="diff-text"><span class="diff-line">"package3"</span>
<span class="diff-line">     ]</span>
<span class="diff-line"> </span>
<span class="diff-line diff-removed">-Unlike the previous example however, maintainers would not necessarily provide a</span>
<span class="diff-line diff-removed">-way to do an installation without any extras since it might leave the package in</span>
<span class="diff-line diff-removed">-an unusable state.</span>
<span class="diff-line diff-removed">-</span>
<span class="diff-line"> If packages can support e.g. multiple backends at the same time, and some of</span>
<span class="diff-line"> the backends should always be installed, then the dependencies for these must be given</span>
<span class="diff-line"> as required dependencies rather than using the default extras mechanism.</span></div>
                        </td>
                        <td>
                            <div class="reason-type tooltip">Deletion
                                <span class="tooltiptext">An entire REQUIREMENT was redundant and therefore removed. Do NOT use this for removal of metadata, placeholders, or formatting.</span>
                            </div>
                            <p>Removed a sentence in the 'Syntax for deselecting extras' section stating that maintainers would not necessarily provide a way to install without any extras; this deletes a constraint within an existing requirement block.</p>
                        </td>
                        
                    </tr>
                    
                    <tr>
                        <td>33</td>
                        <td>
                            <div><strong>From:</strong> 2 &rarr; <strong>To:</strong> 3</div>
                            
                            <div style="font-size: 0.8em; color: #666; margin-bottom: 5px;">
                                0899c62 (2025-02-06 17:02:06 +0000) &rarr; 4c41501 (2025-06-08 17:27:42 +0100)
                            </div>
                            
                            <div class="diff-text"><span class="diff-line">$ pip install napari[pyside6]</span>
<span class="diff-line"> </span>
<span class="diff-line diff-removed">-Supporting minimal installations while not always removing default extras</span>
<span class="diff-line diff-removed">-^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^</span>
<span class="diff-line diff-added">+Supporting extras that should not remove default extras</span>
<span class="diff-line diff-added">+^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^</span>
<span class="diff-line"> </span>
<span class="diff-line diff-removed">-An additional case we consider here is where a package maintainer wants to support</span>
<span class="diff-line diff-removed">-minimal installations without any extras, but also wants to support having users</span>
<span class="diff-line diff-removed">-specify additional extras without removing the default one. Essentially, they</span>
<span class="diff-line diff-removed">-would want:</span>
<span class="diff-line diff-added">+An additional case we consider here is where a package maintainer wants to</span>
<span class="diff-line diff-added">+support the ability for users to opt-in to non-default extras, without removing</span>
<span class="diff-line diff-added">+default extras. Essentially, they might want:</span>
<span class="diff-line"> </span>
<span class="diff-line diff-removed">-* ``package[minimal]`` to give an installation without any extras</span>
<span class="diff-line diff-removed">-* ``package`` to install recommended dependencies (in a ``recommended`` extras)</span>
<span class="diff-line diff-removed">-* ``package[additional]`` to install both recommended and additional dependencies (in an ``additional`` extras)</span>
<span class="diff-line diff-added">+* ``package[]`` to give an installation without any extras</span>
<span class="diff-line diff-added">+* ``package`` to install recommended dependencies (in a ``recommended`` extra)</span>
<span class="diff-line diff-added">+* ``package[alternative]`` to not install default extras, but to install an alternative set of optional dependencies (in an ``alternative`` extra)</span>
<span class="diff-line diff-added">+* ``package[additional]`` to install both recommended and additional dependencies (in an ``additional`` extra)</span>
<span class="diff-line"> </span>
<span class="diff-line"> This could be achieved with e.g:</span></div>
                        </td>
                        <td>
                            <div class="reason-type tooltip">Meaning
                                <span class="tooltiptext">The requirement meaning/intention is changed (says something different).</span>
                            </div>
                            <p>The change rewords and renames the existing guidance about not removing default extras, updating terminology and examples rather than introducing a new requirement. Specifically, the subsection header changes from 'Supporting minimal installations while not always removing default extras' to 'Supporting extras that should not remove default extras', and the examples shift from using package[minimal] to package[] (no extras) and from package[additional] to package[alternative] (a non-default alternative), while still describing opt-in extras that do not remove defaults.</p>
                        </td>
                        
                    </tr>
                    
                    <tr>
                        <td>34</td>
                        <td>
                            <div><strong>From:</strong> 2 &rarr; <strong>To:</strong> 3</div>
                            
                            <div style="font-size: 0.8em; color: #666; margin-bottom: 5px;">
                                0899c62 (2025-02-06 17:02:06 +0000) &rarr; 4c41501 (2025-06-08 17:27:42 +0100)
                            </div>
                            
                            <div class="diff-text"><span class="diff-line">]</span>
<span class="diff-line"> </span>
<span class="diff-line">     [project.optional-dependencies]</span>
<span class="diff-line diff-removed">-    minimal = []</span>
<span class="diff-line">     recommended = [</span>
<span class="diff-line">         "package1",</span>
<span class="diff-line">         "package2"</span>
<span class="diff-line">     ]</span>
<span class="diff-line diff-added">+    alternative = [</span>
<span class="diff-line diff-added">+        "package3"</span>
<span class="diff-line diff-added">+    ]</span>
<span class="diff-line">     additional = [</span>
<span class="diff-line">         "package[recommended]",</span>
<span class="diff-line diff-removed">-        "package3"</span>
<span class="diff-line diff-added">+        "package4"</span>
<span class="diff-line">     ]</span>
<span class="diff-line"> </span>
<span class="diff-line"> The ability for a package to reference itself in the extras is supported by</span></div>
                        </td>
                        <td>
                            <div class="reason-type tooltip">Other
                                <span class="tooltiptext">The change does not fit into any of the above categories (e.g. metadata removal, formatting changes, boilerplate).</span>
                            </div>
                            <p>The changes modify the structure and content of the [project.optional-dependencies] block: the 'minimal' key is removed, a new 'alternative' key is added with 'package3', and 'package3' is moved out of 'additional' into 'alternative' while 'package4' is added to 'additional'. This represents a semantic/behavioral change in the default-extras configuration rather than a simple typo, new standalone requirement, or minor wording adjustment; it alters which extras are installed by default and how defaults interact, so it does not map cleanly to the predefined categories (hence 'Other').</p>
                        </td>
                        
                    </tr>
                    
                    <tr>
                        <td>35</td>
                        <td>
                            <div><strong>From:</strong> 2 &rarr; <strong>To:</strong> 3</div>
                            
                            <div style="font-size: 0.8em; color: #666; margin-bottom: 5px;">
                                0899c62 (2025-02-06 17:02:06 +0000) &rarr; 4c41501 (2025-06-08 17:27:42 +0100)
                            </div>
                            
                            <div class="diff-text"><span class="diff-line">]</span>
<span class="diff-line"> </span>
<span class="diff-line">     [project.optional-dependencies]</span>
<span class="diff-line diff-removed">-    minimal = []</span>
<span class="diff-line">     recommended = [</span>
<span class="diff-line">         "scipy",</span>
<span class="diff-line">         "..."</span></div>
                        </td>
                        <td>
                            <div class="reason-type tooltip">Other
                                <span class="tooltiptext">The change does not fit into any of the above categories (e.g. metadata removal, formatting changes, boilerplate).</span>
                            </div>
                            <p>The primary change is the deletion of the line 'minimal = []' from [project.optional-dependencies] in the New Version. This is an editorial/shortening adjustment (removing a demonstration of a default-empty extra) rather than a substantive change to requirements, nor a new or meaning-change change.</p>
                        </td>
                        
                    </tr>
                    
                    <tr>
                        <td>36</td>
                        <td>
                            <div><strong>From:</strong> 2 &rarr; <strong>To:</strong> 3</div>
                            
                            <div style="font-size: 0.8em; color: #666; margin-bottom: 5px;">
                                0899c62 (2025-02-06 17:02:06 +0000) &rarr; 4c41501 (2025-06-08 17:27:42 +0100)
                            </div>
                            
                            <div class="diff-text"><span class="diff-line">$ pip install astropy[recommended, jupyter]</span>
<span class="diff-line"> </span>
<span class="diff-line diff-added">+Packages with multiple kinds of defaults</span>
<span class="diff-line diff-added">+^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^</span>
<span class="diff-line diff-added">+</span>
<span class="diff-line diff-added">+In some cases, it may be that packages need multiple kinds of defaults. As an example,</span>
<span class="diff-line diff-added">+in `Packages requiring at least one backend or frontend`_, we considered the case of packages</span>
<span class="diff-line diff-added">+that have *either* backends or frontends, but in some cases, packages may have to support</span>
<span class="diff-line diff-added">+backends *and* frontends, and want to specify one or more default frontend and one or</span>
<span class="diff-line diff-added">+more default backend.</span>
<span class="diff-line diff-added">+</span>
<span class="diff-line diff-added">+Ideally, one may want the following behavior:</span>
<span class="diff-line diff-added">+</span>
<span class="diff-line diff-added">+.. code-block:: console</span>
<span class="diff-line diff-added">+</span>
<span class="diff-line diff-added">+    $ pip install package  # installs default backend and frontend</span>
<span class="diff-line diff-added">+    $ pip install package[]  # installs no backends or frontends</span>
<span class="diff-line diff-added">+    $ pip install package[backend1]  # installs backend1 and default frontend</span>
<span class="diff-line diff-added">+    $ pip install package[frontend2]  # installs frontend2 and default backend</span>
<span class="diff-line diff-added">+    $ pip install package[backend1, frontend2]  # installs backend1 and frontend2</span>
<span class="diff-line diff-added">+</span>
<span class="diff-line diff-added">+However, this PEP chooses not to provide a mechanism for making it so that e.g., if</span>
<span class="diff-line diff-added">+``backend1`` is specified, the default backend would be disabled, but the</span>
<span class="diff-line diff-added">+default frontend would be enabled, since this adds complexity.</span>
<span class="diff-line diff-added">+</span>
<span class="diff-line diff-added">+Maintainers should instead for now document that if a backend or frontend is</span>
<span class="diff-line diff-added">+explicitly specified, both backend and frontend need to be specified.</span>
<span class="diff-line diff-added">+Discoverability for users who want to do this should not be an issue however since users</span>
<span class="diff-line diff-added">+need to read the documentation in any case to find out what backends or frontends are</span>
<span class="diff-line diff-added">+available, so they can be shown at the same time how to properly use the extras for</span>
<span class="diff-line diff-added">+backends and frontends.</span>
<span class="diff-line diff-added">+</span>
<span class="diff-line diff-added">+One option to increase user friendliness is that maintainers can create extras</span>
<span class="diff-line diff-added">+called for example ``defaultbackend`` and ``defaultfrontend`` which do install</span>
<span class="diff-line diff-added">+the default backend and frontend. They can then recommend that users do:</span>
<span class="diff-line diff-added">+</span>
<span class="diff-line diff-added">+.. code-block:: console</span>
<span class="diff-line diff-added">+</span>
<span class="diff-line diff-added">+    $ pip install package  # installs default backend and frontend</span>
<span class="diff-line diff-added">+    $ pip install package[]  # installs no backends or frontends</span>
<span class="diff-line diff-added">+    $ pip install package[backend1, defaultfrontend]  # installs backend1 and default frontend</span>
<span class="diff-line diff-added">+    $ pip install package[defaultbackend, frontend2]  # installs frontend2 and default backend</span>
<span class="diff-line diff-added">+    $ pip install package[backend1, frontend2]  # installs backend1 and frontend2</span>
<span class="diff-line diff-added">+</span>
<span class="diff-line diff-added">+This would allow (if desired) users to then get whatever the recommended backend</span>
<span class="diff-line diff-added">+is, even if that default changes in time.</span>
<span class="diff-line diff-added">+</span>
<span class="diff-line diff-added">+If there is a desire to implement a better solution in future, we believe this</span>
<span class="diff-line diff-added">+PEP should not preclude this. For example, one could imagine in future adding</span>
<span class="diff-line diff-added">+the ability for an extra to specify *which* default extras it disables, and if</span>
<span class="diff-line diff-added">+this is not specified then explicitly specified extras would disable all default</span>
<span class="diff-line diff-added">+extras (consistent with the present PEP).</span>
<span class="diff-line"> </span>
<span class="diff-line"> Backward Compatibility</span>
<span class="diff-line"> ======================</span></div>
                        </td>
                        <td>
                            <div class="reason-type tooltip">New
                                <span class="tooltiptext">A new requirement was added.</span>
                            </div>
                            <p>A new section 'Packages with multiple kinds of defaults' was added to the New Version, introducing the concept of multiple default backends/frontends (default backend and default frontend) with example usage and rationale, which was not present in the Old Version.</p>
                        </td>
                        
                    </tr>
                    
                    <tr>
                        <td>37</td>
                        <td>
                            <div><strong>From:</strong> 2 &rarr; <strong>To:</strong> 3</div>
                            
                            <div style="font-size: 0.8em; color: #666; margin-bottom: 5px;">
                                0899c62 (2025-02-06 17:02:06 +0000) &rarr; 4c41501 (2025-06-08 17:27:42 +0100)
                            </div>
                            
                            <div class="diff-text"><span class="diff-line">fewer dependencies being installed.</span>
<span class="diff-line"> </span>
<span class="diff-line"> A specific example of change in behavior can be seen with `pip`_: consider a</span>
<span class="diff-line diff-removed">-package ``package`` which has a required dependency of ``numpy``, a (default)</span>
<span class="diff-line diff-removed">-extra called ``recommended`` which includes ``scipy``, and a ``minimal`` extra</span>
<span class="diff-line diff-removed">-which does not contain any dependencies. If a user installs ``package[minimal]``,</span>
<span class="diff-line diff-removed">-only ``package`` and ``numpy`` will be installed. If a user then does:</span>
<span class="diff-line diff-added">+package ``package`` which has a required dependency of ``numpy``, and a default</span>
<span class="diff-line diff-added">+extra called ``recommended`` which includes ``scipy``. If a user installs</span>
<span class="diff-line diff-added">+``package[]``, only ``package`` and ``numpy`` will be installed. If a user then</span>
<span class="diff-line diff-added">+does:</span>
<span class="diff-line"> </span>
<span class="diff-line"> .. code-block:: console</span></div>
                        </td>
                        <td>
                            <div class="reason-type tooltip">Summarization/shortening
                                <span class="tooltiptext">The change is made to summarize/shorten without changing meaning.</span>
                            </div>
                            <p>The change shortens the explanatory narrative by removing the detailed discussion about the 'minimal' extra and its dependencies, replacing the longer example with a briefer one that still conveys the default/extras behavior. No new behavior is introduced; the intent remains the same, so this is a Summarization/shortening change.</p>
                        </td>
                        
                    </tr>
                    
                    <tr>
                        <td>38</td>
                        <td>
                            <div><strong>From:</strong> 2 &rarr; <strong>To:</strong> 3</div>
                            
                            <div style="font-size: 0.8em; color: #666; margin-bottom: 5px;">
                                0899c62 (2025-02-06 17:02:06 +0000) &rarr; 4c41501 (2025-06-08 17:27:42 +0100)
                            </div>
                            
                            <div class="diff-text"><span class="diff-line">may be changes in behavior in packaging tools due to the change in the</span>
<span class="diff-line"> assumption about what impact an extra can have.</span>
<span class="diff-line"> </span>
<span class="diff-line diff-added">+It is worth noting that the recently-accepted :pep:`751` defines a new file</span>
<span class="diff-line diff-added">+format which is intended to replace alternatives such as the ``pip freeze``</span>
<span class="diff-line diff-added">+output and other tools in future. The new file format is designed so that the</span>
<span class="diff-line diff-added">+packages in the file are installed *without* resolving dependencies, which means</span>
<span class="diff-line diff-added">+that it will be fully compatible with default extras as specified in this PEP,</span>
<span class="diff-line diff-added">+and will avoid the issue with ``pip freeze``/``pip install -r`` mentioned above.</span>
<span class="diff-line diff-added">+</span>
<span class="diff-line"> Security Implications</span>
<span class="diff-line"> =====================</span></div>
                        </td>
                        <td>
                            <div class="reason-type tooltip">New
                                <span class="tooltiptext">A new requirement was added.</span>
                            </div>
                            <p>Inserted a new informational paragraph introducing PEP 751 (a new file format to replace tools like pip freeze), adding that the format will install packages without resolving dependencies and be compatible with default extras; this is new content not present in the old version.</p>
                        </td>
                        
                    </tr>
                    
                    <tr>
                        <td>39</td>
                        <td>
                            <div><strong>From:</strong> 2 &rarr; <strong>To:</strong> 3</div>
                            
                            <div style="font-size: 0.8em; color: #666; margin-bottom: 5px;">
                                0899c62 (2025-02-06 17:02:06 +0000) &rarr; 4c41501 (2025-06-08 17:27:42 +0100)
                            </div>
                            
                            <div class="diff-text"><span class="diff-line">the extra explicitly as long as possible (until it is clear that most/all users</span>
<span class="diff-line">   are using package installers that implement this PEP). There is no downside to</span>
<span class="diff-line">   keeping the extra be explicitly mentioned, but this will ensure that users with</span>
<span class="diff-line diff-removed">-  modern tooling who do not read documentation (which may be a non-negligeable</span>
<span class="diff-line diff-added">+  modern tooling who do not read documentation (which may be a non-negligible</span>
<span class="diff-line">   fraction of the user community) will start getting the recommended</span>
<span class="diff-line">   dependencies by default.</span>
<span class="diff-line"> </span>
<span class="diff-line diff-removed">-* Adding a new extra, whether it be ``minimal`` or another new extra that is to</span>
<span class="diff-line diff-removed">-  be the default, comes with the same caveats that it does prior to this PEP, which</span>
<span class="diff-line diff-removed">-  is that users will only be able to use this extra for releases that define</span>
<span class="diff-line diff-removed">-  this extra. This might seem obvious, but consider a package that has a version</span>
<span class="diff-line diff-removed">-  1.0 prior to using default extras. Suppose that package now defines</span>
<span class="diff-line diff-removed">-  ``minimal`` in 2.0, then downstream users and packages that want to depend on</span>
<span class="diff-line diff-removed">-  a minimal version of the package cannot declare the following dependency::</span>
<span class="diff-line diff-removed">-</span>
<span class="diff-line diff-removed">-    package[minimal]>=1.0</span>
<span class="diff-line diff-removed">-</span>
<span class="diff-line diff-removed">-  because ``package[minimal]==1.0`` does not exist (in practice, pip ignores</span>
<span class="diff-line diff-removed">-  unknown extras, so it might be possible to do this, but there is no guarantee</span>
<span class="diff-line diff-removed">-  that other tools won't error on an unrecognized extra).</span>
<span class="diff-line diff-removed">-</span>
<span class="diff-line diff-removed">-  The easiest solution to this problem is for package authors to define a no-op</span>
<span class="diff-line diff-removed">-  ``minimal`` extra as soon as possible, even if only planning to adopt default</span>
<span class="diff-line diff-removed">-  extras further down the road, as it will allow ``package[minimal]`` to work</span>
<span class="diff-line diff-removed">-  for versions prior to when defaults were adopted.</span>
<span class="diff-line diff-added">+* Since prior to this PEP, ``package[]`` was equivalent to ``package``,</span>
<span class="diff-line diff-added">+  authors will be able to document ``package[]`` as a backward-compatible</span>
<span class="diff-line diff-added">+  universal way of getting a minimal installation. For packages that define</span>
<span class="diff-line diff-added">+  default extras, installing ``package[]`` will always give a minimal</span>
<span class="diff-line diff-added">+  installation even with older versions of packaging tools such as `pip`_, and</span>
<span class="diff-line diff-added">+  releases of this package that pre-date the introduction of default extras for</span>
<span class="diff-line diff-added">+  a specific package will also be installable with ``package[]`` (although in</span>
<span class="diff-line diff-added">+  these cases this will be equivalent to ``package``). For packages that do not</span>
<span class="diff-line diff-added">+  define default extras, ``package[]`` will continue to be equivalent to</span>
<span class="diff-line diff-added">+  ``package``.</span>
<span class="diff-line"> </span>
<span class="diff-line"> Avoiding the addition of many default dependencies</span>
<span class="diff-line"> ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^</span>
<span class="diff-line"> </span>
<span class="diff-line"> One temptation for authors might be to include many dependencies by default since</span>
<span class="diff-line"> they can provide a way to opt out from these. We recommend however that authors</span>
<span class="diff-line diff-removed">-carefully consider what is included by default to avoid unecessarily bloating</span>
<span class="diff-line diff-added">+carefully consider what is included by default to avoid unnecessarily bloating</span>
<span class="diff-line"> installations and complicating dependency trees. Using default extras does not</span>
<span class="diff-line"> mean that all extras need to be defaults, and there is still scope for users to</span>
<span class="diff-line"> explicitly opt in to non-default extras.</span>
<span class="diff-line"> </span>
<span class="diff-line diff-added">+Default extras should generally be treated with the same "weight" as required</span>
<span class="diff-line diff-added">+dependencies. When a package is widely used, introducing a default extra will</span>
<span class="diff-line diff-added">+result in that extra's dependencies being transitively included -- unless all</span>
<span class="diff-line diff-added">+downstream packages are updated to explicitly opt out using minimal installation</span>
<span class="diff-line diff-added">+specifications.</span>
<span class="diff-line diff-added">+</span>
<span class="diff-line diff-added">+As an example, the `pytest <https://docs.pytest.org/>`_ package currently has nearly 1,500 plugins that depend on it. If pytest were to add a default extra and those plugins were not updated accordingly, installing a plugin would include the default extras' dependencies. This doesn’t preclude the use of default extras, but addition of default extras requires careful evaluation of its downstream effects.</span>
<span class="diff-line diff-added">+</span>
<span class="diff-line"> Inheriting from default extras</span>
<span class="diff-line"> ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^</span>
<span class="diff-line"> </span>
<span class="diff-line"> If package authors choose to make an extra be installed by default, it is important</span>
<span class="diff-line"> that they are aware that if users explicitly specify another extra, the default may</span>
<span class="diff-line diff-removed">-not be installed, unless they use the approach described in `Supporting minimal</span>
<span class="diff-line diff-removed">-installations while not always removing default extras`_.</span>
<span class="diff-line diff-added">+not be installed, unless they use the approach described in `Supporting extras</span>
<span class="diff-line diff-added">+that should not remove default extras`_.</span>
<span class="diff-line"> </span>
<span class="diff-line diff-removed">-There are cases, such as the interchangeable backends, or the ``minimal`` extras,</span>
<span class="diff-line diff-added">+There are cases, such as the interchangeable backends,</span>
<span class="diff-line"> where ignoring the default if an extra is explicitly specified is the right</span>
<span class="diff-line"> thing to do. However, for other cases, such as using default extras to include</span>
<span class="diff-line"> recommended dependencies while still providing a way to do minimal installs, it</span></div>
                        </td>
                        <td>
                            <div class="reason-type tooltip">Meaning
                                <span class="tooltiptext">The requirement meaning/intention is changed (says something different).</span>
                            </div>
                            <p>The diff primarily changes the semantics of the package[] syntax: it now defines package[] as a backward-compatible universal minimal-install option that yields a minimal installation even with older packaging tools, i.e., a change in intent/behavior (Meaning). The other edits are minor typographical corrections and non-substantive clarifications.</p>
                        </td>
                        
                    </tr>
                    
                    <tr>
                        <td>40</td>
                        <td>
                            <div><strong>From:</strong> 2 &rarr; <strong>To:</strong> 3</div>
                            
                            <div style="font-size: 0.8em; color: #666; margin-bottom: 5px;">
                                0899c62 (2025-02-06 17:02:06 +0000) &rarr; 4c41501 (2025-06-08 17:27:42 +0100)
                            </div>
                            
                            <div class="diff-text"><span class="diff-line">└── package2</span>
<span class="diff-line">         └── package1</span>
<span class="diff-line"> </span>
<span class="diff-line diff-removed">-If ``package1`` has a default extra named ``recommended`` and a ``minimal``</span>
<span class="diff-line diff-removed">-extra which is empty, then:</span>
<span class="diff-line diff-added">+If ``package1`` has a default extra named ``recommended`` then:</span>
<span class="diff-line"> </span>
<span class="diff-line"> .. code-block:: console</span>
<span class="diff-line"> </span>
<span class="diff-line diff-removed">-    $ pip install package1[minimal]</span>
<span class="diff-line diff-added">+    $ pip install package1[]</span>
<span class="diff-line"> </span>
<span class="diff-line"> will still result in the ``recommended`` extra being installed if ``package2``</span>
<span class="diff-line diff-removed">-continues to depend on ``package1`` (with no extras specified). If the dependency</span>
<span class="diff-line diff-removed">-tree was updated to instead be::</span>
<span class="diff-line diff-added">+continues to depend on ``package1`` (with no extras specified). This could be</span>
<span class="diff-line diff-added">+solved by changing the dependency tree to instead be::</span>
<span class="diff-line"> </span>
<span class="diff-line">     package1</span>
<span class="diff-line">     └── package2</span>
<span class="diff-line diff-removed">-        └── package1[minimal]</span>
<span class="diff-line diff-added">+        └── package1[]</span>
<span class="diff-line"> </span>
<span class="diff-line diff-removed">-Then ``package1`` would no longer be installable with tools that do not yet</span>
<span class="diff-line diff-removed">-implement this PEP (if those tools would fail on unrecognized extras). Authors</span>
<span class="diff-line diff-removed">-therefore need to carefully consider a migration plan, coordinating with the</span>
<span class="diff-line diff-removed">-authors of ``package2``.</span>
<span class="diff-line diff-added">+assuming that indeed ``package2`` does not depend on any features provided by</span>
<span class="diff-line diff-added">+the extra dependencies of ``package1``. Authors therefore need to carefully</span>
<span class="diff-line diff-added">+consider a migration plan, coordinating with the authors of ``package2``.</span>
<span class="diff-line"> </span>
<span class="diff-line diff-added">+Documenting packages with default extras</span>
<span class="diff-line diff-added">+^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^</span>
<span class="diff-line diff-added">+</span>
<span class="diff-line diff-added">+Regardless of how default extras are used, package authors should aim to ensure</span>
<span class="diff-line diff-added">+that their package's documentation makes it clear how extras are to be</span>
<span class="diff-line diff-added">+used. 'Best practices' documentation should mention:</span>
<span class="diff-line diff-added">+</span>
<span class="diff-line diff-added">+* that installing ``package`` will be equivalent to ``package[<default extras>]``</span>
<span class="diff-line diff-added">+* that installing ``package[]`` will include only minimal/required dependencies,</span>
<span class="diff-line diff-added">+  but that this will not guarantee that optional dependencies do not get installed</span>
<span class="diff-line diff-added">+  if ``package`` appears anywhere else in the dependency tree</span>
<span class="diff-line diff-added">+* what other optional extras are available, and whether or not they disable the</span>
<span class="diff-line diff-added">+  default extras (since this can be controlled as described in `Supporting</span>
<span class="diff-line diff-added">+  extras that should not remove default extras`_)</span>
<span class="diff-line diff-added">+* any instructions specific to packages that might have e.g. default backends</span>
<span class="diff-line diff-added">+  *and* frontends (as described in `Packages with multiple kinds of defaults`_)</span>
<span class="diff-line"> </span>
<span class="diff-line"> Packaging repository maintainers</span>
<span class="diff-line"> --------------------------------</span></div>
                        </td>
                        <td>
                            <div class="reason-type tooltip">Clarification
                                <span class="tooltiptext">Rephrasing the same requirement to help understanding WITHOUT changing the meaning/intent.</span>
                            </div>
                            <p>The New Version adds a dedicated section 'Documenting packages with default extras' that clarifies how authors should document the behavior of default extras, including equivalence of package and package[] in certain contexts and how default extras interact with other extras. This is a clarifying expansion of documentation guidance rather than a change in the core requirements or behavior; it rephrases and adds guidance to help users understand and developers adopt it.</p>
                        </td>
                        
                    </tr>
                    
                    <tr>
                        <td>41</td>
                        <td>
                            <div><strong>From:</strong> 2 &rarr; <strong>To:</strong> 3</div>
                            
                            <div style="font-size: 0.8em; color: #666; margin-bottom: 5px;">
                                0899c62 (2025-02-06 17:02:06 +0000) &rarr; 4c41501 (2025-06-08 17:27:42 +0100)
                            </div>
                            
                            <div class="diff-text"><span class="diff-line">contains a modified version of the `Flit</span>
<span class="diff-line"> <https://flit.pypa.io/en/stable/>`_ package.</span>
<span class="diff-line"> </span>
<span class="diff-line diff-removed">-</span>
<span class="diff-line diff-removed">-</span>
<span class="diff-line"> The implementations above are proofs-of-concept at this time and the existing changes have</span>
<span class="diff-line"> not yet been reviewed by the relevant maintainers. Nevertheless, they are</span>
<span class="diff-line"> functional enough to allow for interested maintainers to try these out.</span></div>
                        </td>
                        <td>
                            <div class="reason-type tooltip">Other
                                <span class="tooltiptext">The change does not fit into any of the above categories (e.g. metadata removal, formatting changes, boilerplate).</span>
                            </div>
                            <p>Editorial addition: the diff section was introduced in the new version, stating that a modified version of the Flit package is used. This does not change the requirements or intent of the PEP; content remains equivalent aside from the patch note.</p>
                        </td>
                        
                    </tr>
                    
                    <tr>
                        <td>42</td>
                        <td>
                            <div><strong>From:</strong> 2 &rarr; <strong>To:</strong> 3</div>
                            
                            <div style="font-size: 0.8em; color: #666; margin-bottom: 5px;">
                                0899c62 (2025-02-06 17:02:06 +0000) &rarr; 4c41501 (2025-06-08 17:27:42 +0100)
                            </div>
                            
                            <div class="diff-text"><span class="diff-line">Rejected Ideas</span>
<span class="diff-line"> ==============</span>
<span class="diff-line"> </span>
<span class="diff-line diff-added">+Using a meta-package for recommended installations</span>
<span class="diff-line diff-added">+--------------------------------------------------</span>
<span class="diff-line diff-added">+</span>
<span class="diff-line diff-added">+Using existing packaging tools and infrastructure, package maintainers who want</span>
<span class="diff-line diff-added">+to provide a minimal installation for some users and a default non-minimal</span>
<span class="diff-line diff-added">+installation for regular users (e.g. with recommended dependencies or a default</span>
<span class="diff-line diff-added">+backend) can technically already achieve this if they are willing to distribute</span>
<span class="diff-line diff-added">+two packages instead of one -- for example ``package-core`` which would be the main package</span>
<span class="diff-line diff-added">+with minimal dependencies, and ``package`` which would be a metapackage that</span>
<span class="diff-line diff-added">+would depend on ``package-core`` with optional dependencies enabled.</span>
<span class="diff-line diff-added">+</span>
<span class="diff-line diff-added">+Taking once again a concrete example from the `Motivation`_</span>
<span class="diff-line diff-added">+section, the `astropy`_ package defines a ``recommended`` extra that users are</span>
<span class="diff-line diff-added">+currently instructed to install in the default installation instructions.</span>
<span class="diff-line diff-added">+In principle, one could rename the existing ``astropy`` package to e.g. ``astropy-core``</span>
<span class="diff-line diff-added">+and then create a new ``astropy`` package which would be a metapackage that would</span>
<span class="diff-line diff-added">+contain the following dependencies section:</span>
<span class="diff-line diff-added">+</span>
<span class="diff-line diff-added">+.. code-block:: toml</span>
<span class="diff-line diff-added">+</span>
<span class="diff-line diff-added">+    dependencies = [</span>
<span class="diff-line diff-added">+        "astropy-core[recommended]"</span>
<span class="diff-line diff-added">+    ]</span>
<span class="diff-line diff-added">+</span>
<span class="diff-line diff-added">+Since users may want to pin or place version constraints on the ``astropy``</span>
<span class="diff-line diff-added">+meta-package (e.g. ``astropy>5.0``), the metapackage would need to follow</span>
<span class="diff-line diff-added">+the same versions as the core package, and would need to use strict pinning</span>
<span class="diff-line diff-added">+in the dependency section, e.g.:</span>
<span class="diff-line diff-added">+</span>
<span class="diff-line diff-added">+.. code-block:: toml</span>
<span class="diff-line diff-added">+</span>
<span class="diff-line diff-added">+    version = "7.1.0"</span>
<span class="diff-line diff-added">+    dependencies = [</span>
<span class="diff-line diff-added">+        "astropy-core[recommended]==7.1.0"</span>
<span class="diff-line diff-added">+    ]</span>
<span class="diff-line diff-added">+</span>
<span class="diff-line diff-added">+This idea may seem appealing because it is technically already feasible. However, in</span>
<span class="diff-line diff-added">+practice, many projects have opted not to do this, for a number of reasons, which</span>
<span class="diff-line diff-added">+we now take a look at. Some of these may not be applicable to future new projects,</span>
<span class="diff-line diff-added">+but some of them apply to all projects, old and new.</span>
<span class="diff-line diff-added">+</span>
<span class="diff-line diff-added">+Mismatch between package and module name</span>
<span class="diff-line diff-added">+^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^</span>
<span class="diff-line diff-added">+</span>
<span class="diff-line diff-added">+In terms of naming, there are two main options for a package that wants to use the metapackage</span>
<span class="diff-line diff-added">+approach:</span>
<span class="diff-line diff-added">+</span>
<span class="diff-line diff-added">+* The first option is for the existing package to be kept as-is, which means</span>
<span class="diff-line diff-added">+  that ``package`` would provide the minimal installation, and to then create a</span>
<span class="diff-line diff-added">+  new metapackage with a different name, such as ``package-all``. However, this</span>
<span class="diff-line diff-added">+  suffers from one of the problems that motivated this PEP in the first place -</span>
<span class="diff-line diff-added">+  users are often not aware that they can do e.g. ``package[recommended]``, so</span>
<span class="diff-line diff-added">+  in the same way, they might not realise that ``package-all`` exists. This once</span>
<span class="diff-line diff-added">+  again places the burden on the average user to discover this, rather then</span>
<span class="diff-line diff-added">+  shifting some of the burden to more advanced users.</span>
<span class="diff-line diff-added">+</span>
<span class="diff-line diff-added">+* The second option is for the existing package to be renamed to e.g. ``package-core``, and</span>
<span class="diff-line diff-added">+  for the new meta-package to be called ``package``. This is a better option</span>
<span class="diff-line diff-added">+  than the first one, but is not ideal, as it then introduces a non-intuitive</span>
<span class="diff-line diff-added">+  mismatch between the package name and module name, in that ``package-core`` provides</span>
<span class="diff-line diff-added">+  the ``package`` module, and ``package`` does not provide any module. An example of why</span>
<span class="diff-line diff-added">+  this would lead to confusion is that an average user might think that uninstalling</span>
<span class="diff-line diff-added">+  the ``package`` module would be done with e.g.:</span>
<span class="diff-line diff-added">+</span>
<span class="diff-line diff-added">+  .. code-block:: shell</span>
<span class="diff-line diff-added">+</span>
<span class="diff-line diff-added">+      $ pip uninstall package</span>
<span class="diff-line diff-added">+</span>
<span class="diff-line diff-added">+  but this would not be the case (the ``package`` module would still work), and</span>
<span class="diff-line diff-added">+  it may not be obvious to this user that the ``package-core`` package even</span>
<span class="diff-line diff-added">+  exists.</span>
<span class="diff-line diff-added">+</span>
<span class="diff-line diff-added">+Multiple repositories or monorepos</span>
<span class="diff-line diff-added">+^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^</span>
<span class="diff-line diff-added">+</span>
<span class="diff-line diff-added">+This approach requires either maintaining two repositories instead of one, or</span>
<span class="diff-line diff-added">+switching to using a monorepo which would contain both packages. Neither option</span>
<span class="diff-line diff-added">+is ideal:</span>
<span class="diff-line diff-added">+</span>
<span class="diff-line diff-added">+* Splitting into two repositories places a long-term additional burden on</span>
<span class="diff-line diff-added">+  maintainers, who have to make sure that these stay in sync (in terms of</span>
<span class="diff-line diff-added">+  version but also other aspects such as extras, as will be discussed in</span>
<span class="diff-line diff-added">+  `Synchronizing metadata`_). In addition, the naming issue mentioned in</span>
<span class="diff-line diff-added">+  `Mismatch between package and module name`_ has additional complications here</span>
<span class="diff-line diff-added">+  – either the names of the repositories match the packages, in which case any</span>
<span class="diff-line diff-added">+  user who has a checkout of the previous ``package`` repository will need to</span>
<span class="diff-line diff-added">+  update their remote URLs or any git clone URLs to point to the</span>
<span class="diff-line diff-added">+  ``package-core`` repository. The alternative is to preserve the ``package``</span>
<span class="diff-line diff-added">+  repository to contain the ``package-core`` package, and have a different name</span>
<span class="diff-line diff-added">+  for the meta-package, but this could lead to confusion.</span>
<span class="diff-line diff-added">+</span>
<span class="diff-line diff-added">+* Switching to a monorepo may be a significant change for some projects,</span>
<span class="diff-line diff-added">+  and it is not uncommon for tools to assume by default that a single repository</span>
<span class="diff-line diff-added">+  corresponds to a single package - while these can often be configured to then</span>
<span class="diff-line diff-added">+  work with a monorepo, it is an additional burden on the maintainers. In</span>
<span class="diff-line diff-added">+  addition, if the main package is moved to a sub-directory in the monorepo, any</span>
<span class="diff-line diff-added">+  user that is e.g. pip installing the package from the repository URL will need</span>
<span class="diff-line diff-added">+  to adjust this to install from a sub-directory (adding ``subdirectory=`` to</span>
<span class="diff-line diff-added">+  the repo URL), and any existing workflows that clone the repository and assume</span>
<span class="diff-line diff-added">+  the previous layout would break.</span>
<span class="diff-line diff-added">+</span>
<span class="diff-line diff-added">+Depending on the minimal package</span>
<span class="diff-line diff-added">+^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^</span>
<span class="diff-line diff-added">+</span>
<span class="diff-line diff-added">+Packages that need to depend on package versions that are older than the first</span>
<span class="diff-line diff-added">+version where the split was done will not easily be able to depend on the</span>
<span class="diff-line diff-added">+minimal package. Whereas with the main proposal in this PEP, downstream users</span>
<span class="diff-line diff-added">+will be able to depend on e.g. ``package[]>version`` where ``version`` pre-dates</span>
<span class="diff-line diff-added">+the introduction of default extras, with the splitting approach it will not be</span>
<span class="diff-line diff-added">+possible for downstream users to depend on e.g. ``package-core>version``, since</span>
<span class="diff-line diff-added">+``package-core`` did not previously exist.</span>
<span class="diff-line diff-added">+</span>
<span class="diff-line diff-added">+A possible solution to this is for developers to release no-op metadata packages</span>
<span class="diff-line diff-added">+for all old versions of a package, but this is a significant additional burden</span>
<span class="diff-line diff-added">+on the maintainers.</span>
<span class="diff-line diff-added">+</span>
<span class="diff-line diff-added">+Uninstallation</span>
<span class="diff-line diff-added">+^^^^^^^^^^^^^^</span>
<span class="diff-line diff-added">+</span>
<span class="diff-line diff-added">+As alluded to when referring to naming issues in `Mismatch between package and</span>
<span class="diff-line diff-added">+module name`_, uninstalling packages will no longer work the way users expect. A</span>
<span class="diff-line diff-added">+user doing:</span>
<span class="diff-line diff-added">+</span>
<span class="diff-line diff-added">+.. code-block:: shell</span>
<span class="diff-line diff-added">+</span>
<span class="diff-line diff-added">+    $ pip uninstall package</span>
<span class="diff-line diff-added">+</span>
<span class="diff-line diff-added">+will still be left with ``package-core``, but may not realise it. This is</span>
<span class="diff-line diff-added">+not just confusing, but is in effect a breaking change that may impact a number</span>
<span class="diff-line diff-added">+of existing workflows.</span>
<span class="diff-line diff-added">+</span>
<span class="diff-line diff-added">+Package distributions</span>
<span class="diff-line diff-added">+^^^^^^^^^^^^^^^^^^^^^</span>
<span class="diff-line diff-added">+</span>
<span class="diff-line diff-added">+Having two packages instead of one would increase the long-term maintenance cost</span>
<span class="diff-line diff-added">+of package distributions simply by virtue of the fact that two packages would</span>
<span class="diff-line diff-added">+have to be released instead of one, and in some cases this would introduce extra</span>
<span class="diff-line diff-added">+manual work at each release.</span>
<span class="diff-line diff-added">+</span>
<span class="diff-line diff-added">+Synchronizing metadata</span>
<span class="diff-line diff-added">+^^^^^^^^^^^^^^^^^^^^^^</span>
<span class="diff-line diff-added">+</span>
<span class="diff-line diff-added">+The main metadata that would be important to keep synchronized between the main</span>
<span class="diff-line diff-added">+package and the metapackage is the version. Anytime a new release of the core</span>
<span class="diff-line diff-added">+package is done, the metapackage would need to have its version updated as well</span>
<span class="diff-line diff-added">+as the version pinning for the core package in the dependencies.</span>
<span class="diff-line diff-added">+</span>
<span class="diff-line diff-added">+In addition, all extras defined in the core package would need to be redefined</span>
<span class="diff-line diff-added">+and kept in sync in the metapackage. For example, if ``package`` defines a</span>
<span class="diff-line diff-added">+``additional`` extra, users should still be able to install</span>
<span class="diff-line diff-added">+``package[additional]``, but users installing the ``package-core`` package should</span>
<span class="diff-line diff-added">+also have the option of doing ``package-core[additional]``.</span>
<span class="diff-line diff-added">+</span>
<span class="diff-line diff-added">+Other metadata that would need to be kept in sync includes for example author</span>
<span class="diff-line diff-added">+information and project URLs.</span>
<span class="diff-line diff-added">+</span>
<span class="diff-line diff-added">+Summary</span>
<span class="diff-line diff-added">+^^^^^^^</span>
<span class="diff-line diff-added">+</span>
<span class="diff-line diff-added">+Overall, this solution would imply a significantly higher maintenance burden,</span>
<span class="diff-line diff-added">+not just in terms of initial set-up and transition (which could already be</span>
<span class="diff-line diff-added">+prohibitive for large established projects), but also in terms of long-term</span>
<span class="diff-line diff-added">+maintenance. This also has the potential for breaking user workflows (in</span>
<span class="diff-line diff-added">+particular around the issue of repositories, and e.g. uninstallation). For all</span>
<span class="diff-line diff-added">+these reasons, we do not consider it a compelling alternative to the present PEP.</span>
<span class="diff-line diff-added">+</span>
<span class="diff-line"> Syntax for deselecting extras</span>
<span class="diff-line"> -----------------------------</span></div>
                        </td>
                        <td>
                            <div class="reason-type tooltip">New
                                <span class="tooltiptext">A new requirement was added.</span>
                            </div>
                            <p>Added a substantial set of new rejected-ideas options under the Rejected Ideas section, introducing several alternative designs and considerations (Using a meta-package for recommended installations; Mismatch between package and module name; Multiple repositories or monorepos; Depending on the minimal package; Uninstallation; Package distributions; Synchronizing metadata; Summary). These items did not exist in the Old Version and expand the discussion without altering existing requirements.</p>
                        </td>
                        
                    </tr>
                    
                    <tr>
                        <td>43</td>
                        <td>
                            <div><strong>From:</strong> 2 &rarr; <strong>To:</strong> 3</div>
                            
                            <div style="font-size: 0.8em; color: #666; margin-bottom: 5px;">
                                0899c62 (2025-02-06 17:02:06 +0000) &rarr; 4c41501 (2025-06-08 17:27:42 +0100)
                            </div>
                            
                            <div class="diff-text"><span class="diff-line">extras_require={'': ['package_a']},</span>
<span class="diff-line">     )</span>
<span class="diff-line"> </span>
<span class="diff-line diff-removed">-</span>
<span class="diff-line"> which is valid and equivalent to having ``package_a`` being defined in</span>
<span class="diff-line"> ``install_requires``, so changing the meaning of the empty string would</span>
<span class="diff-line"> break compatibility.</span></div>
                        </td>
                        <td>
                            <div class="reason-type tooltip">Other
                                <span class="tooltiptext">The change does not fit into any of the above categories (e.g. metadata removal, formatting changes, boilerplate).</span>
                            </div>
                            <p>Editorial deletion of an explanatory sentence in the 'Using a meta-package...' section. The removed sentence was a clarification about compatibility; its deletion does not introduce a new requirement or change the intended behavior, only trimming text. Therefore it's not a new or meaning-changing requirement; it's an editorial content removal.</p>
                        </td>
                        
                    </tr>
                    
                    <tr>
                        <td>44</td>
                        <td>
                            <div><strong>From:</strong> 2 &rarr; <strong>To:</strong> 3</div>
                            
                            <div style="font-size: 0.8em; color: #666; margin-bottom: 5px;">
                                0899c62 (2025-02-06 17:02:06 +0000) &rarr; 4c41501 (2025-06-08 17:27:42 +0100)
                            </div>
                            
                            <div class="diff-text"><span class="diff-line">also support unselecting them. This approach would be similar to the ``--no-install-recommends``</span>
<span class="diff-line"> option for the ``apt`` tool.</span>
<span class="diff-line"> </span>
<span class="diff-line diff-removed">-However, this solution is not ideal because it would not allow packages to</span>
<span class="diff-line diff-added">+However, this solution is not ideal on its own because it would not allow packages to</span>
<span class="diff-line"> specify themselves that they do not need some of the default extras of a</span>
<span class="diff-line"> dependency. It would also carry risks for users who might disable all default</span>
<span class="diff-line"> extras in a big dependency tree, potentially breaking packages in the tree that</span>
<span class="diff-line diff-removed">-rely on default extras at any point. Nevertheless, this PEP does not disallow</span>
<span class="diff-line diff-removed">-this approach and it is up to the maintainers of different packaging tools to</span>
<span class="diff-line diff-removed">-decide if they want to support this kind of option.</span>
<span class="diff-line diff-removed">-</span>
<span class="diff-line diff-removed">-``package[]`` disables default extras</span>
<span class="diff-line diff-removed">-</span>
<span class="diff-line diff-removed">-Another way to specify not to install any extras, including default extras, would</span>
<span class="diff-line diff-removed">-be to use ``package[]``. However, this would break the current assumption in packaging tools that</span>
<span class="diff-line diff-removed">-``package[]`` is equivalent to ``package``, and may also result</span>
<span class="diff-line diff-removed">-in developers overusing ``[]`` by default even when it is not needed. As</span>
<span class="diff-line diff-removed">-highlighted in `How to teach this`_, there may also be cases where package</span>
<span class="diff-line diff-removed">-maintainers do not actually want to support an installation without any extras,</span>
<span class="diff-line diff-removed">-for example in cases where at least one backend or frontend must be installed.</span>
<span class="diff-line diff-removed">-</span>
<span class="diff-line diff-removed">-Open issues</span>
<span class="diff-line diff-removed">-===========</span>
<span class="diff-line diff-removed">-</span>
<span class="diff-line diff-removed">-Should ``package[]`` disable default extras?</span>
<span class="diff-line diff-removed">-</span>
<span class="diff-line diff-removed">-Currently, the PEP as written above does not allow ``package[]`` to be</span>
<span class="diff-line diff-removed">-equivalent to installing the package with no extras, but there would be some</span>
<span class="diff-line diff-removed">-benefits to allowing this:</span>
<span class="diff-line diff-removed">-</span>
<span class="diff-line diff-removed">-* It would avoid different packages using different names for a 'no default'</span>
<span class="diff-line diff-removed">-  extras (e.g. ``minimal``, ``no-default``, ``no-defaults``) and reduce the</span>
<span class="diff-line diff-removed">-  burden for people who don’t want to have to scan through source code or</span>
<span class="diff-line diff-removed">-  documentation to figure out whether there is the equivalent of a ``minimal``</span>
<span class="diff-line diff-removed">-  extra.</span>
<span class="diff-line diff-removed">-</span>
<span class="diff-line diff-removed">-* It would allow people who want to use existing packages as-is and future</span>
<span class="diff-line diff-removed">-  versions of those packages with no default extras to use ``package[]`` because</span>
<span class="diff-line diff-removed">-  that syntax works right now, so it would provide a consistent way over time to</span>
<span class="diff-line diff-removed">-  get a minimal install.</span>
<span class="diff-line diff-removed">-</span>
<span class="diff-line diff-removed">-On the other hand, it is not clear at this point whether any tools are currently</span>
<span class="diff-line diff-removed">-relying on ``package[]`` being identical to ``package`` in a way that would</span>
<span class="diff-line diff-removed">-break compatibility if this was done, so this needs to be investigated.</span>
<span class="diff-line diff-added">+rely on default extras at any point.</span>
<span class="diff-line diff-added">+</span>
<span class="diff-line diff-added">+Nevertheless, this PEP does not disallow this approach and it is up to the</span>
<span class="diff-line diff-added">+maintainers of different packaging tools to decide if they want to support this</span>
<span class="diff-line diff-added">+kind of option. It is a flag that could at the very least be useful for package</span>
<span class="diff-line diff-added">+maintainers who want to identify places in dependency trees where default extras</span>
<span class="diff-line diff-added">+are being relied on. However, if it is supported, it should be made clear that</span>
<span class="diff-line diff-added">+using this flag does not guarantee a functional environment.</span>
<span class="diff-line"> </span>
<span class="diff-line"> Copyright</span>
<span class="diff-line"> =========</span></div>
                        </td>
                        <td>
                            <div class="reason-type tooltip">Meaning
                                <span class="tooltiptext">The requirement meaning/intention is changed (says something different).</span>
                            </div>
                            <p>The revision changes the interpretation of how default extras can be deselected. The old text contained a dedicated 'package[] disables default extras' section and open issues, effectively restricting behavior; the new text replaces it with a permissive note that tooling could expose a flag to disable default extras and clarifies that using such a flag need not guarantee a functional environment. In short, the change alters the meaning/intent of the requirement rather than adding a purely new or corrective detail.</p>
                        </td>
                        
                    </tr>
                    
                    <tr>
                        <td>45</td>
                        <td>
                            <div><strong>From:</strong> 3 &rarr; <strong>To:</strong> 4</div>
                            
                            <div style="font-size: 0.8em; color: #666; margin-bottom: 5px;">
                                4c41501 (2025-06-08 17:27:42 +0100) &rarr; 816c057 (2025-06-09 12:29:19 +0100)
                            </div>
                            
                            <div class="diff-text"><span class="diff-line">Title: Default Extras for Python Software Packages</span>
<span class="diff-line"> Author: Thomas Robitaille <thomas.robitaille@gmail.com>, Jonathan Dekhtiar <jonathan@dekhtiar.com></span>
<span class="diff-line"> Sponsor: Pradyun Gedam <pradyunsg@gmail.com></span>
<span class="diff-line diff-removed">-Discussions-To: https://discuss.python.org/t/79706/</span>
<span class="diff-line diff-added">+Discussions-To: https://discuss.python.org/t/94905/</span>
<span class="diff-line"> Status: Draft</span>
<span class="diff-line"> Type: Standards Track</span>
<span class="diff-line"> Topic: Packaging</span></div>
                        </td>
                        <td>
                            <div class="reason-type tooltip">Other
                                <span class="tooltiptext">The change does not fit into any of the above categories (e.g. metadata removal, formatting changes, boilerplate).</span>
                            </div>
                            <p>The changes are metadata/editorial: only the Discussion-To link was updated and a new entry added to the Post-History. No changes to actual requirements, their meaning, or scope.</p>
                        </td>
                        
                    </tr>
                    
                    <tr>
                        <td>46</td>
                        <td>
                            <div><strong>From:</strong> 3 &rarr; <strong>To:</strong> 4</div>
                            
                            <div style="font-size: 0.8em; color: #666; margin-bottom: 5px;">
                                4c41501 (2025-06-08 17:27:42 +0100) &rarr; 816c057 (2025-06-09 12:29:19 +0100)
                            </div>
                            
                            <div class="diff-text"><span class="diff-line">Post-History:</span>
<span class="diff-line">   `15-Jan-2025 <https://discuss.python.org/t/77892/>`__,</span>
<span class="diff-line">   `06-Feb-2025 <https://discuss.python.org/t/79706/>`__,</span>
<span class="diff-line diff-added">+  `09-Jun-2025 <https://discuss.python.org/t/94905/>`__,</span>
<span class="diff-line"> </span>
<span class="diff-line"> Abstract</span>
<span class="diff-line"> ========</span></div>
                        </td>
                        <td>
                            <div class="reason-type tooltip">Other
                                <span class="tooltiptext">The change does not fit into any of the above categories (e.g. metadata removal, formatting changes, boilerplate).</span>
                            </div>
                            <p>Metadata change: added a new post-history entry for 09-Jun-2025 in the New Version. No changes to the requirements themselves.</p>
                        </td>
                        
                    </tr>
                    
                </tbody>
            </table>
            
            
        </form>
    </div>

    
</body>
</html>